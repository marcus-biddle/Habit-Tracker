import{c as we,w as Bn}from"./index-CiLVYEwt.js";import{r as g,j as t,g as qn}from"./catchall-DRODuvbv.js";import{S as ht}from"./separator-_L2rgyuV.js";import{B as le,c as Un}from"./button-DQSlb20C.js";import{C as Kn,g as De,i as at}from"./index-DhH_ZBC8.js";import{C as Ee,a as pt,b as Re,c as mt,e as Gn,d as Ot,f as Wn}from"./card-DTOgLEzj.js";import{L as Be,I as tt}from"./label-CbLlOEyM.js";import{c as ce}from"./utils-CDN07tui.js";import{R as Qn,P as Jn,O as Yn,C as Zn,i as sn,D as Xn,a as er,b as tr,c as nr,d as rr,e as sr}from"./dropdown-menu-BswiM50g.js";import{u as Pe,P as ye,a as an,b as ir,R as ar,c as or,d as qe,A as on,e as lr,i as cr,j as ur,k as dr,F as fr,D as hr,C as pr,f as mr}from"./index-rF36wCKm.js";import{a as Le,u as ln}from"./index-olsFugHa.js";import{S as gr,P as xr}from"./search-BskTmzzA.js";import{u as cn,t as Oe}from"./AuthContext-DaAjC7CZ.js";import{C as vr,S as Tt,h as Mt,a as Dt,b as Lt,c as Ft,i as yr,T as zt,e as Ht,f as $t,g as Vt}from"./tooltip-BdRvqY4z.js";import{u as br,T as jr,a as wr,b as ot,c as Sr,f as Bt,d as _r,e as qt,g as kr,h as Cr,i as Nr,j as Er,C as Ut,E as Rr,A as Pr}from"./table-dz0QsdU7.js";import{c as Se,s as Ue}from"./createLucideIcon-CEFgt_Ga.js";import{T as Ir,F as lt}from"./index-wRzQt9Q5.js";import{C as Ar,m as _e}from"./proxy-C-nCn21S.js";import{C as Kt}from"./circle-check-Tw8vkcF0.js";import{T as Gt}from"./target-BGb18Bjt.js";import{P as Wt}from"./x-58R_Chr7.js";import"./index-CmlK_pLt.js";const Or=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Tr=Se("circle-check-big",Or);const Mr=[["path",{d:"m15 17 5-5-5-5",key:"nf172w"}],["path",{d:"M4 18v-2a4 4 0 0 1 4-4h12",key:"jmiej9"}]],ct=Se("forward",Mr);const Dr=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],Lr=Se("lock-open",Dr);const Fr=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],zr=Se("lock",Fr);const Hr=[["path",{d:"M5 12h14",key:"1ays0h"}]],$r=Se("minus",Hr);const Vr=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],Br=Se("notebook-pen",Vr);const qr=[["path",{d:"M5 7 3 5",key:"1yys58"}],["path",{d:"M9 6V3",key:"1ptz9u"}],["path",{d:"m13 7 2-2",key:"1w3vmq"}],["circle",{cx:"9",cy:"13",r:"3",key:"1mma13"}],["path",{d:"M11.83 12H20a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2.17",key:"2frwzc"}],["path",{d:"M16 16h2",key:"dnq2od"}]],Ur=Se("projector",qr);const Kr=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Gr=Se("square-check",Kr);const Wr=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m10 8 4 4-4 4",key:"1wy4r4"}]],Qr=Se("square-chevron-right",Wr);var Qt=1,Jr=.9,Yr=.8,Zr=.17,ut=.1,dt=.999,Xr=.9999,es=.99,ts=/[\\\/_+.#"@\[\(\{&]/,ns=/[\\\/_+.#"@\[\(\{&]/g,rs=/[\s-]/,un=/[\s-]/g;function gt(e,n,r,s,i,a,l){if(a===n.length)return i===e.length?Qt:es;var h=`${i},${a}`;if(l[h]!==void 0)return l[h];for(var d=s.charAt(a),o=r.indexOf(d,i),x=0,m,y,_,j;o>=0;)m=gt(e,n,r,s,o+1,a+1,l),m>x&&(o===i?m*=Qt:ts.test(e.charAt(o-1))?(m*=Yr,_=e.slice(i,o-1).match(ns),_&&i>0&&(m*=Math.pow(dt,_.length))):rs.test(e.charAt(o-1))?(m*=Jr,j=e.slice(i,o-1).match(un),j&&i>0&&(m*=Math.pow(dt,j.length))):(m*=Zr,i>0&&(m*=Math.pow(dt,o-i))),e.charAt(o)!==n.charAt(a)&&(m*=Xr)),(m<ut&&r.charAt(o-1)===s.charAt(a+1)||s.charAt(a+1)===s.charAt(a)&&r.charAt(o-1)!==s.charAt(a))&&(y=gt(e,n,r,s,o+1,a+2,l),y*ut>m&&(m=y*ut)),m>x&&(x=m),o=r.indexOf(d,o+1);return l[h]=x,x}function Jt(e){return e.toLowerCase().replace(un," ")}function ss(e,n,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,gt(e,n,Jt(e),Jt(n),0,0,{})}var He='[cmdk-group=""]',ft='[cmdk-group-items=""]',is='[cmdk-group-heading=""]',dn='[cmdk-item=""]',Yt=`${dn}:not([aria-disabled="true"])`,xt="cmdk-item-select",Te="data-value",as=(e,n,r)=>ss(e,n,r),fn=g.createContext(void 0),Je=()=>g.useContext(fn),hn=g.createContext(void 0),bt=()=>g.useContext(hn),pn=g.createContext(void 0),mn=g.forwardRef((e,n)=>{let r=Me(()=>{var p,w;return{search:"",value:(w=(p=e.value)!=null?p:e.defaultValue)!=null?w:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),s=Me(()=>new Set),i=Me(()=>new Map),a=Me(()=>new Map),l=Me(()=>new Set),h=gn(e),{label:d,children:o,value:x,onValueChange:m,filter:y,shouldFilter:_,loop:j,disablePointerSelection:k=!1,vimBindings:C=!0,...b}=e,I=Pe(),N=Pe(),Z=Pe(),Y=g.useRef(null),T=xs();Ie(()=>{if(x!==void 0){let p=x.trim();r.current.value=p,E.emit()}},[x]),Ie(()=>{T(6,M)},[]);let E=g.useMemo(()=>({subscribe:p=>(l.current.add(p),()=>l.current.delete(p)),snapshot:()=>r.current,setState:(p,w,D)=>{var P,$,V,O;if(!Object.is(r.current[p],w)){if(r.current[p]=w,p==="search")S(),f(),T(1,v);else if(p==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let z=document.getElementById(Z);z?z.focus():(P=document.getElementById(I))==null||P.focus()}if(T(7,()=>{var z;r.current.selectedItemId=(z=U())==null?void 0:z.id,E.emit()}),D||T(5,M),(($=h.current)==null?void 0:$.value)!==void 0){let z=w??"";(O=(V=h.current).onValueChange)==null||O.call(V,z);return}}E.emit()}},emit:()=>{l.current.forEach(p=>p())}}),[]),c=g.useMemo(()=>({value:(p,w,D)=>{var P;w!==((P=a.current.get(p))==null?void 0:P.value)&&(a.current.set(p,{value:w,keywords:D}),r.current.filtered.items.set(p,u(w,D)),T(2,()=>{f(),E.emit()}))},item:(p,w)=>(s.current.add(p),w&&(i.current.has(w)?i.current.get(w).add(p):i.current.set(w,new Set([p]))),T(3,()=>{S(),f(),r.current.value||v(),E.emit()}),()=>{a.current.delete(p),s.current.delete(p),r.current.filtered.items.delete(p);let D=U();T(4,()=>{S(),D?.getAttribute("id")===p&&v(),E.emit()})}),group:p=>(i.current.has(p)||i.current.set(p,new Set),()=>{a.current.delete(p),i.current.delete(p)}),filter:()=>h.current.shouldFilter,label:d||e["aria-label"],getDisablePointerSelection:()=>h.current.disablePointerSelection,listId:I,inputId:Z,labelId:N,listInnerRef:Y}),[]);function u(p,w){var D,P;let $=(P=(D=h.current)==null?void 0:D.filter)!=null?P:as;return p?$(p,r.current.search,w):0}function f(){if(!r.current.search||h.current.shouldFilter===!1)return;let p=r.current.filtered.items,w=[];r.current.filtered.groups.forEach(P=>{let $=i.current.get(P),V=0;$.forEach(O=>{let z=p.get(O);V=Math.max(z,V)}),w.push([P,V])});let D=Y.current;te().sort((P,$)=>{var V,O;let z=P.getAttribute("id"),J=$.getAttribute("id");return((V=p.get(J))!=null?V:0)-((O=p.get(z))!=null?O:0)}).forEach(P=>{let $=P.closest(ft);$?$.appendChild(P.parentElement===$?P:P.closest(`${ft} > *`)):D.appendChild(P.parentElement===D?P:P.closest(`${ft} > *`))}),w.sort((P,$)=>$[1]-P[1]).forEach(P=>{var $;let V=($=Y.current)==null?void 0:$.querySelector(`${He}[${Te}="${encodeURIComponent(P[0])}"]`);V?.parentElement.appendChild(V)})}function v(){let p=te().find(D=>D.getAttribute("aria-disabled")!=="true"),w=p?.getAttribute(Te);E.setState("value",w||void 0)}function S(){var p,w,D,P;if(!r.current.search||h.current.shouldFilter===!1){r.current.filtered.count=s.current.size;return}r.current.filtered.groups=new Set;let $=0;for(let V of s.current){let O=(w=(p=a.current.get(V))==null?void 0:p.value)!=null?w:"",z=(P=(D=a.current.get(V))==null?void 0:D.keywords)!=null?P:[],J=u(O,z);r.current.filtered.items.set(V,J),J>0&&$++}for(let[V,O]of i.current)for(let z of O)if(r.current.filtered.items.get(z)>0){r.current.filtered.groups.add(V);break}r.current.filtered.count=$}function M(){var p,w,D;let P=U();P&&(((p=P.parentElement)==null?void 0:p.firstChild)===P&&((D=(w=P.closest(He))==null?void 0:w.querySelector(is))==null||D.scrollIntoView({block:"nearest"})),P.scrollIntoView({block:"nearest"}))}function U(){var p;return(p=Y.current)==null?void 0:p.querySelector(`${dn}[aria-selected="true"]`)}function te(){var p;return Array.from(((p=Y.current)==null?void 0:p.querySelectorAll(Yt))||[])}function K(p){let w=te()[p];w&&E.setState("value",w.getAttribute(Te))}function H(p){var w;let D=U(),P=te(),$=P.findIndex(O=>O===D),V=P[$+p];(w=h.current)!=null&&w.loop&&(V=$+p<0?P[P.length-1]:$+p===P.length?P[0]:P[$+p]),V&&E.setState("value",V.getAttribute(Te))}function X(p){let w=U(),D=w?.closest(He),P;for(;D&&!P;)D=p>0?ms(D,He):gs(D,He),P=D?.querySelector(Yt);P?E.setState("value",P.getAttribute(Te)):H(p)}let L=()=>K(te().length-1),ee=p=>{p.preventDefault(),p.metaKey?L():p.altKey?X(1):H(1)},F=p=>{p.preventDefault(),p.metaKey?K(0):p.altKey?X(-1):H(-1)};return g.createElement(ye.div,{ref:n,tabIndex:-1,...b,"cmdk-root":"",onKeyDown:p=>{var w;(w=b.onKeyDown)==null||w.call(b,p);let D=p.nativeEvent.isComposing||p.keyCode===229;if(!(p.defaultPrevented||D))switch(p.key){case"n":case"j":{C&&p.ctrlKey&&ee(p);break}case"ArrowDown":{ee(p);break}case"p":case"k":{C&&p.ctrlKey&&F(p);break}case"ArrowUp":{F(p);break}case"Home":{p.preventDefault(),K(0);break}case"End":{p.preventDefault(),L();break}case"Enter":{p.preventDefault();let P=U();if(P){let $=new Event(xt);P.dispatchEvent($)}}}}},g.createElement("label",{"cmdk-label":"",htmlFor:c.inputId,id:c.labelId,style:ys},d),rt(e,p=>g.createElement(hn.Provider,{value:E},g.createElement(fn.Provider,{value:c},p))))}),os=g.forwardRef((e,n)=>{var r,s;let i=Pe(),a=g.useRef(null),l=g.useContext(pn),h=Je(),d=gn(e),o=(s=(r=d.current)==null?void 0:r.forceMount)!=null?s:l?.forceMount;Ie(()=>{if(!o)return h.item(i,l?.id)},[o]);let x=xn(i,a,[e.value,e.children,a],e.keywords),m=bt(),y=ke(T=>T.value&&T.value===x.current),_=ke(T=>o||h.filter()===!1?!0:T.search?T.filtered.items.get(i)>0:!0);g.useEffect(()=>{let T=a.current;if(!(!T||e.disabled))return T.addEventListener(xt,j),()=>T.removeEventListener(xt,j)},[_,e.onSelect,e.disabled]);function j(){var T,E;k(),(E=(T=d.current).onSelect)==null||E.call(T,x.current)}function k(){m.setState("value",x.current,!0)}if(!_)return null;let{disabled:C,value:b,onSelect:I,forceMount:N,keywords:Z,...Y}=e;return g.createElement(ye.div,{ref:Le(a,n),...Y,id:i,"cmdk-item":"",role:"option","aria-disabled":!!C,"aria-selected":!!y,"data-disabled":!!C,"data-selected":!!y,onPointerMove:C||h.getDisablePointerSelection()?void 0:k,onClick:C?void 0:j},e.children)}),ls=g.forwardRef((e,n)=>{let{heading:r,children:s,forceMount:i,...a}=e,l=Pe(),h=g.useRef(null),d=g.useRef(null),o=Pe(),x=Je(),m=ke(_=>i||x.filter()===!1?!0:_.search?_.filtered.groups.has(l):!0);Ie(()=>x.group(l),[]),xn(l,h,[e.value,e.heading,d]);let y=g.useMemo(()=>({id:l,forceMount:i}),[i]);return g.createElement(ye.div,{ref:Le(h,n),...a,"cmdk-group":"",role:"presentation",hidden:m?void 0:!0},r&&g.createElement("div",{ref:d,"cmdk-group-heading":"","aria-hidden":!0,id:o},r),rt(e,_=>g.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?o:void 0},g.createElement(pn.Provider,{value:y},_))))}),cs=g.forwardRef((e,n)=>{let{alwaysRender:r,...s}=e,i=g.useRef(null),a=ke(l=>!l.search);return!r&&!a?null:g.createElement(ye.div,{ref:Le(i,n),...s,"cmdk-separator":"",role:"separator"})}),us=g.forwardRef((e,n)=>{let{onValueChange:r,...s}=e,i=e.value!=null,a=bt(),l=ke(o=>o.search),h=ke(o=>o.selectedItemId),d=Je();return g.useEffect(()=>{e.value!=null&&a.setState("search",e.value)},[e.value]),g.createElement(ye.input,{ref:n,...s,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":d.listId,"aria-labelledby":d.labelId,"aria-activedescendant":h,id:d.inputId,type:"text",value:i?e.value:l,onChange:o=>{i||a.setState("search",o.target.value),r?.(o.target.value)}})}),ds=g.forwardRef((e,n)=>{let{children:r,label:s="Suggestions",...i}=e,a=g.useRef(null),l=g.useRef(null),h=ke(o=>o.selectedItemId),d=Je();return g.useEffect(()=>{if(l.current&&a.current){let o=l.current,x=a.current,m,y=new ResizeObserver(()=>{m=requestAnimationFrame(()=>{let _=o.offsetHeight;x.style.setProperty("--cmdk-list-height",_.toFixed(1)+"px")})});return y.observe(o),()=>{cancelAnimationFrame(m),y.unobserve(o)}}},[]),g.createElement(ye.div,{ref:Le(a,n),...i,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":h,"aria-label":s,id:d.listId},rt(e,o=>g.createElement("div",{ref:Le(l,d.listInnerRef),"cmdk-list-sizer":""},o)))}),fs=g.forwardRef((e,n)=>{let{open:r,onOpenChange:s,overlayClassName:i,contentClassName:a,container:l,...h}=e;return g.createElement(Qn,{open:r,onOpenChange:s},g.createElement(Jn,{container:l},g.createElement(Yn,{"cmdk-overlay":"",className:i}),g.createElement(Zn,{"aria-label":e.label,"cmdk-dialog":"",className:a},g.createElement(mn,{ref:n,...h}))))}),hs=g.forwardRef((e,n)=>ke(r=>r.filtered.count===0)?g.createElement(ye.div,{ref:n,...e,"cmdk-empty":"",role:"presentation"}):null),ps=g.forwardRef((e,n)=>{let{progress:r,children:s,label:i="Loading...",...a}=e;return g.createElement(ye.div,{ref:n,...a,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},rt(e,l=>g.createElement("div",{"aria-hidden":!0},l)))}),ze=Object.assign(mn,{List:ds,Item:os,Input:us,Group:ls,Separator:cs,Dialog:fs,Empty:hs,Loading:ps});function ms(e,n){let r=e.nextElementSibling;for(;r;){if(r.matches(n))return r;r=r.nextElementSibling}}function gs(e,n){let r=e.previousElementSibling;for(;r;){if(r.matches(n))return r;r=r.previousElementSibling}}function gn(e){let n=g.useRef(e);return Ie(()=>{n.current=e}),n}var Ie=typeof window>"u"?g.useEffect:g.useLayoutEffect;function Me(e){let n=g.useRef();return n.current===void 0&&(n.current=e()),n}function ke(e){let n=bt(),r=()=>e(n.snapshot());return g.useSyncExternalStore(n.subscribe,r,r)}function xn(e,n,r,s=[]){let i=g.useRef(),a=Je();return Ie(()=>{var l;let h=(()=>{var o;for(let x of r){if(typeof x=="string")return x.trim();if(typeof x=="object"&&"current"in x)return x.current?(o=x.current.textContent)==null?void 0:o.trim():i.current}})(),d=s.map(o=>o.trim());a.value(e,h,d),(l=n.current)==null||l.setAttribute(Te,h),i.current=h}),i}var xs=()=>{let[e,n]=g.useState(),r=Me(()=>new Map);return Ie(()=>{r.current.forEach(s=>s()),r.current=new Map},[e]),(s,i)=>{r.current.set(s,i),n({})}};function vs(e){let n=e.type;return typeof n=="function"?n(e.props):"render"in n?n.render(e.props):e}function rt({asChild:e,children:n},r){return e&&g.isValidElement(n)?g.cloneElement(vs(n),{ref:n.ref},r(n.props.children)):r(n)}var ys={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function bs({className:e,...n}){return t.jsx(ze,{"data-slot":"command",className:ce("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...n})}function js({className:e,...n}){return t.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[t.jsx(gr,{className:"size-4 shrink-0 opacity-50"}),t.jsx(ze.Input,{"data-slot":"command-input",className:ce("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e),...n})]})}function ws({className:e,...n}){return t.jsx(ze.List,{"data-slot":"command-list",className:ce("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),...n})}function Ss({...e}){return t.jsx(ze.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...e})}function _s({className:e,...n}){return t.jsx(ze.Group,{"data-slot":"command-group",className:ce("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...n})}function ks({className:e,...n}){return t.jsx(ze.Item,{"data-slot":"command-item",className:ce("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...n})}function Cs(e){const n=Ns(e),r=g.forwardRef((s,i)=>{const{children:a,...l}=s,h=g.Children.toArray(a),d=h.find(Rs);if(d){const o=d.props.children,x=h.map(m=>m===d?g.Children.count(o)>1?g.Children.only(null):g.isValidElement(o)?o.props.children:null:m);return t.jsx(n,{...l,ref:i,children:g.isValidElement(o)?g.cloneElement(o,void 0,x):null})}return t.jsx(n,{...l,ref:i,children:a})});return r.displayName=`${e}.Slot`,r}function Ns(e){const n=g.forwardRef((r,s)=>{const{children:i,...a}=r;if(g.isValidElement(i)){const l=Is(i),h=Ps(a,i.props);return i.type!==g.Fragment&&(h.ref=s?Le(s,l):l),g.cloneElement(i,h)}return g.Children.count(i)>1?g.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var Es=Symbol("radix.slottable");function Rs(e){return g.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Es}function Ps(e,n){const r={...n};for(const s in n){const i=e[s],a=n[s];/^on[A-Z]/.test(s)?i&&a?r[s]=(...h)=>{const d=a(...h);return i(...h),d}:i&&(r[s]=i):s==="style"?r[s]={...i,...a}:s==="className"&&(r[s]=[i,a].filter(Boolean).join(" "))}return{...e,...r}}function Is(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=n&&"isReactWarning"in n&&n.isReactWarning;return r?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=n&&"isReactWarning"in n&&n.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var st="Popover",[vn]=or(st,[an]),Ye=an(),[As,Ce]=vn(st),yn=e=>{const{__scopePopover:n,children:r,open:s,defaultOpen:i,onOpenChange:a,modal:l=!1}=e,h=Ye(n),d=g.useRef(null),[o,x]=g.useState(!1),[m,y]=ir({prop:s,defaultProp:i??!1,onChange:a,caller:st});return t.jsx(ar,{...h,children:t.jsx(As,{scope:n,contentId:Pe(),triggerRef:d,open:m,onOpenChange:y,onOpenToggle:g.useCallback(()=>y(_=>!_),[y]),hasCustomAnchor:o,onCustomAnchorAdd:g.useCallback(()=>x(!0),[]),onCustomAnchorRemove:g.useCallback(()=>x(!1),[]),modal:l,children:r})})};yn.displayName=st;var bn="PopoverAnchor",Os=g.forwardRef((e,n)=>{const{__scopePopover:r,...s}=e,i=Ce(bn,r),a=Ye(r),{onCustomAnchorAdd:l,onCustomAnchorRemove:h}=i;return g.useEffect(()=>(l(),()=>h()),[l,h]),t.jsx(on,{...a,...s,ref:n})});Os.displayName=bn;var jn="PopoverTrigger",wn=g.forwardRef((e,n)=>{const{__scopePopover:r,...s}=e,i=Ce(jn,r),a=Ye(r),l=ln(n,i.triggerRef),h=t.jsx(ye.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Nn(i.open),...s,ref:l,onClick:qe(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?h:t.jsx(on,{asChild:!0,...a,children:h})});wn.displayName=jn;var jt="PopoverPortal",[Ts,Ms]=vn(jt,{forceMount:void 0}),Sn=e=>{const{__scopePopover:n,forceMount:r,children:s,container:i}=e,a=Ce(jt,n);return t.jsx(Ts,{scope:n,forceMount:r,children:t.jsx(sn,{present:r||a.open,children:t.jsx(lr,{asChild:!0,container:i,children:s})})})};Sn.displayName=jt;var Fe="PopoverContent",_n=g.forwardRef((e,n)=>{const r=Ms(Fe,e.__scopePopover),{forceMount:s=r.forceMount,...i}=e,a=Ce(Fe,e.__scopePopover);return t.jsx(sn,{present:s||a.open,children:a.modal?t.jsx(Ls,{...i,ref:n}):t.jsx(Fs,{...i,ref:n})})});_n.displayName=Fe;var Ds=Cs("PopoverContent.RemoveScroll"),Ls=g.forwardRef((e,n)=>{const r=Ce(Fe,e.__scopePopover),s=g.useRef(null),i=ln(n,s),a=g.useRef(!1);return g.useEffect(()=>{const l=s.current;if(l)return cr(l)},[]),t.jsx(ur,{as:Ds,allowPinchZoom:!0,children:t.jsx(kn,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:qe(e.onCloseAutoFocus,l=>{l.preventDefault(),a.current||r.triggerRef.current?.focus()}),onPointerDownOutside:qe(e.onPointerDownOutside,l=>{const h=l.detail.originalEvent,d=h.button===0&&h.ctrlKey===!0,o=h.button===2||d;a.current=o},{checkForDefaultPrevented:!1}),onFocusOutside:qe(e.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),Fs=g.forwardRef((e,n)=>{const r=Ce(Fe,e.__scopePopover),s=g.useRef(!1),i=g.useRef(!1);return t.jsx(kn,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(s.current||r.triggerRef.current?.focus(),a.preventDefault()),s.current=!1,i.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(s.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=a.target;r.triggerRef.current?.contains(l)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),kn=g.forwardRef((e,n)=>{const{__scopePopover:r,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEscapeKeyDown:h,onPointerDownOutside:d,onFocusOutside:o,onInteractOutside:x,...m}=e,y=Ce(Fe,r),_=Ye(r);return dr(),t.jsx(fr,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:i,onUnmountAutoFocus:a,children:t.jsx(hr,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:x,onEscapeKeyDown:h,onPointerDownOutside:d,onFocusOutside:o,onDismiss:()=>y.onOpenChange(!1),children:t.jsx(pr,{"data-state":Nn(y.open),role:"dialog",id:y.contentId,..._,...m,ref:n,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Cn="PopoverClose",zs=g.forwardRef((e,n)=>{const{__scopePopover:r,...s}=e,i=Ce(Cn,r);return t.jsx(ye.button,{type:"button",...s,ref:n,onClick:qe(e.onClick,()=>i.onOpenChange(!1))})});zs.displayName=Cn;var Hs="PopoverArrow",$s=g.forwardRef((e,n)=>{const{__scopePopover:r,...s}=e,i=Ye(r);return t.jsx(mr,{...i,...s,ref:n})});$s.displayName=Hs;function Nn(e){return e?"open":"closed"}var Vs=yn,Bs=wn,qs=Sn,Us=_n;function En({...e}){return t.jsx(Vs,{"data-slot":"popover",...e})}function Rn({...e}){return t.jsx(Bs,{"data-slot":"popover-trigger",...e})}function Pn({className:e,align:n="center",sideOffset:r=4,...s}){return t.jsx(qs,{children:t.jsx(Us,{"data-slot":"popover-content",align:n,sideOffset:r,className:ce("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...s})})}function Ks({onSelect:e}){const{user:n}=cn(),[r,s]=g.useState(!1),[i,a]=g.useState(""),[l,h]=g.useState([]),d=async()=>{if(!n)return;const o=await De(n.id);h(o)};return g.useEffect(()=>{d()},[]),t.jsxs(En,{open:r,onOpenChange:s,children:[t.jsx(Rn,{asChild:!0,children:t.jsxs(le,{variant:"outline",role:"combobox","aria-expanded":r,className:"w-full justify-between",children:[i&&l?l.find(o=>o.id===i)?.name:"Select habit...",t.jsx(vr,{className:"opacity-50"})]})}),t.jsx(Pn,{className:"w-full p-0",children:t.jsxs(bs,{children:[t.jsx(js,{id:"habit",placeholder:"Search habits...",className:"h-9"}),t.jsxs(ws,{children:[t.jsx(Ss,{children:"No habit found."}),t.jsx(_s,{children:l&&l.map(o=>t.jsxs(ks,{value:o.id,onSelect:x=>{a(x===i?"":x),e(x===i?"":x),s(!1)},children:[o.name,t.jsx(Kn,{className:ce("ml-auto",i===o.id?"opacity-100":"opacity-0")})]},o.id))})]})]})})]})}function Gs({className:e,...n}){return t.jsx("div",{"data-slot":"empty",className:ce("flex min-w-0 flex-1 flex-col items-center justify-center gap-6 rounded-lg border-dashed p-6 text-center text-balance md:p-12",e),...n})}function Ws({className:e,...n}){return t.jsx("div",{"data-slot":"empty-header",className:ce("flex max-w-sm flex-col items-center gap-2 text-center",e),...n})}const Qs=Un("flex shrink-0 items-center justify-center mb-2 [&_svg]:pointer-events-none [&_svg]:shrink-0",{variants:{variant:{default:"bg-transparent",icon:"bg-muted text-foreground flex size-10 shrink-0 items-center justify-center rounded-lg [&_svg:not([class*='size-'])]:size-6"}},defaultVariants:{variant:"default"}});function Js({className:e,variant:n="default",...r}){return t.jsx("div",{"data-slot":"empty-icon","data-variant":n,className:ce(Qs({variant:n,className:e})),...r})}function Ys({className:e,...n}){return t.jsx("div",{"data-slot":"empty-title",className:ce("text-lg font-medium tracking-tight",e),...n})}function Zs({className:e,...n}){return t.jsx("div",{"data-slot":"empty-description",className:ce("text-muted-foreground [&>a:hover]:text-primary text-sm/relaxed [&>a]:underline [&>a]:underline-offset-4",e),...n})}function Xs({className:e,...n}){return t.jsx("div",{"data-slot":"empty-content",className:ce("flex w-full max-w-sm min-w-0 flex-col items-center gap-4 text-sm text-balance",e),...n})}function ei(){return t.jsxs(Gs,{children:[t.jsxs(Ws,{children:[t.jsx(Js,{variant:"icon",children:t.jsx(Ur,{})}),t.jsx(Ys,{children:"No Habits Yet"}),t.jsx(Zs,{children:"You haven't created any habits yet. Get started by creating your first one."})]}),t.jsx(Xs,{children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx(we,{to:"/dashboard/habits",children:t.jsx(le,{children:"Create Habit"})}),t.jsx(le,{variant:"outline",disabled:!0,children:"Import Habit"})]})})]})}function ti(e){return Object.prototype.toString.call(e)==="[object Object]"}function Zt(e){return ti(e)||Array.isArray(e)}function ni(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function wt(e,n){const r=Object.keys(e),s=Object.keys(n);if(r.length!==s.length)return!1;const i=JSON.stringify(Object.keys(e.breakpoints||{})),a=JSON.stringify(Object.keys(n.breakpoints||{}));return i!==a?!1:r.every(l=>{const h=e[l],d=n[l];return typeof h=="function"?`${h}`==`${d}`:!Zt(h)||!Zt(d)?h===d:wt(h,d)})}function Xt(e){return e.concat().sort((n,r)=>n.name>r.name?1:-1).map(n=>n.options)}function ri(e,n){if(e.length!==n.length)return!1;const r=Xt(e),s=Xt(n);return r.every((i,a)=>{const l=s[a];return wt(i,l)})}function St(e){return typeof e=="number"}function vt(e){return typeof e=="string"}function it(e){return typeof e=="boolean"}function en(e){return Object.prototype.toString.call(e)==="[object Object]"}function re(e){return Math.abs(e)}function _t(e){return Math.sign(e)}function Ke(e,n){return re(e-n)}function si(e,n){if(e===0||n===0||re(e)<=re(n))return 0;const r=Ke(re(e),re(n));return re(r/e)}function ii(e){return Math.round(e*100)/100}function Ge(e){return We(e).map(Number)}function ge(e){return e[Ze(e)]}function Ze(e){return Math.max(0,e.length-1)}function kt(e,n){return n===Ze(e)}function tn(e,n=0){return Array.from(Array(e),(r,s)=>n+s)}function We(e){return Object.keys(e)}function In(e,n){return[e,n].reduce((r,s)=>(We(s).forEach(i=>{const a=r[i],l=s[i],h=en(a)&&en(l);r[i]=h?In(a,l):l}),r),{})}function yt(e,n){return typeof n.MouseEvent<"u"&&e instanceof n.MouseEvent}function ai(e,n){const r={start:s,center:i,end:a};function s(){return 0}function i(d){return a(d)/2}function a(d){return n-d}function l(d,o){return vt(e)?r[e](d):e(n,d,o)}return{measure:l}}function Qe(){let e=[];function n(i,a,l,h={passive:!0}){let d;if("addEventListener"in i)i.addEventListener(a,l,h),d=()=>i.removeEventListener(a,l,h);else{const o=i;o.addListener(l),d=()=>o.removeListener(l)}return e.push(d),s}function r(){e=e.filter(i=>i())}const s={add:n,clear:r};return s}function oi(e,n,r,s){const i=Qe(),a=1e3/60;let l=null,h=0,d=0;function o(){i.add(e,"visibilitychange",()=>{e.hidden&&j()})}function x(){_(),i.clear()}function m(C){if(!d)return;l||(l=C,r(),r());const b=C-l;for(l=C,h+=b;h>=a;)r(),h-=a;const I=h/a;s(I),d&&(d=n.requestAnimationFrame(m))}function y(){d||(d=n.requestAnimationFrame(m))}function _(){n.cancelAnimationFrame(d),l=null,h=0,d=0}function j(){l=null,h=0}return{init:o,destroy:x,start:y,stop:_,update:r,render:s}}function li(e,n){const r=n==="rtl",s=e==="y",i=s?"y":"x",a=s?"x":"y",l=!s&&r?-1:1,h=x(),d=m();function o(j){const{height:k,width:C}=j;return s?k:C}function x(){return s?"top":r?"right":"left"}function m(){return s?"bottom":r?"left":"right"}function y(j){return j*l}return{scroll:i,cross:a,startEdge:h,endEdge:d,measureSize:o,direction:y}}function Ae(e=0,n=0){const r=re(e-n);function s(o){return o<e}function i(o){return o>n}function a(o){return s(o)||i(o)}function l(o){return a(o)?s(o)?e:n:o}function h(o){return r?o-r*Math.ceil((o-n)/r):o}return{length:r,max:n,min:e,constrain:l,reachedAny:a,reachedMax:i,reachedMin:s,removeOffset:h}}function An(e,n,r){const{constrain:s}=Ae(0,e),i=e+1;let a=l(n);function l(y){return r?re((i+y)%i):s(y)}function h(){return a}function d(y){return a=l(y),m}function o(y){return x().set(h()+y)}function x(){return An(e,h(),r)}const m={get:h,set:d,add:o,clone:x};return m}function ci(e,n,r,s,i,a,l,h,d,o,x,m,y,_,j,k,C,b,I){const{cross:N,direction:Z}=e,Y=["INPUT","SELECT","TEXTAREA"],T={passive:!1},E=Qe(),c=Qe(),u=Ae(50,225).constrain(_.measure(20)),f={mouse:300,touch:400},v={mouse:500,touch:600},S=j?43:25;let M=!1,U=0,te=0,K=!1,H=!1,X=!1,L=!1;function ee(R){if(!I)return;function G(Q){(it(I)||I(R,Q))&&$(Q)}const B=n;E.add(B,"dragstart",Q=>Q.preventDefault(),T).add(B,"touchmove",()=>{},T).add(B,"touchend",()=>{}).add(B,"touchstart",G).add(B,"mousedown",G).add(B,"touchcancel",O).add(B,"contextmenu",O).add(B,"click",z,!0)}function F(){E.clear(),c.clear()}function p(){const R=L?r:n;c.add(R,"touchmove",V,T).add(R,"touchend",O).add(R,"mousemove",V,T).add(R,"mouseup",O)}function w(R){const G=R.nodeName||"";return Y.includes(G)}function D(){return(j?v:f)[L?"mouse":"touch"]}function P(R,G){const B=m.add(_t(R)*-1),Q=x.byDistance(R,!j).distance;return j||re(R)<u?Q:C&&G?Q*.5:x.byIndex(B.get(),0).distance}function $(R){const G=yt(R,s);L=G,X=j&&G&&!R.buttons&&M,M=Ke(i.get(),l.get())>=2,!(G&&R.button!==0)&&(w(R.target)||(K=!0,a.pointerDown(R),o.useFriction(0).useDuration(0),i.set(l),p(),U=a.readPoint(R),te=a.readPoint(R,N),y.emit("pointerDown")))}function V(R){if(!yt(R,s)&&R.touches.length>=2)return O(R);const B=a.readPoint(R),Q=a.readPoint(R,N),W=Ke(B,U),se=Ke(Q,te);if(!H&&!L&&(!R.cancelable||(H=W>se,!H)))return O(R);const q=a.pointerMove(R);W>k&&(X=!0),o.useFriction(.3).useDuration(.75),h.start(),i.add(Z(q)),R.preventDefault()}function O(R){const B=x.byDistance(0,!1).index!==m.get(),Q=a.pointerUp(R)*D(),W=P(Z(Q),B),se=si(Q,W),q=S-10*se,ne=b+se/50;H=!1,K=!1,c.clear(),o.useDuration(q).useFriction(ne),d.distance(W,!j),L=!1,y.emit("pointerUp")}function z(R){X&&(R.stopPropagation(),R.preventDefault(),X=!1)}function J(){return K}return{init:ee,destroy:F,pointerDown:J}}function ui(e,n){let s,i;function a(m){return m.timeStamp}function l(m,y){const j=`client${(y||e.scroll)==="x"?"X":"Y"}`;return(yt(m,n)?m:m.touches[0])[j]}function h(m){return s=m,i=m,l(m)}function d(m){const y=l(m)-l(i),_=a(m)-a(s)>170;return i=m,_&&(s=m),y}function o(m){if(!s||!i)return 0;const y=l(i)-l(s),_=a(m)-a(s),j=a(m)-a(i)>170,k=y/_;return _&&!j&&re(k)>.1?k:0}return{pointerDown:h,pointerMove:d,pointerUp:o,readPoint:l}}function di(){function e(r){const{offsetTop:s,offsetLeft:i,offsetWidth:a,offsetHeight:l}=r;return{top:s,right:i+a,bottom:s+l,left:i,width:a,height:l}}return{measure:e}}function fi(e){function n(s){return e*(s/100)}return{measure:n}}function hi(e,n,r,s,i,a,l){const h=[e].concat(s);let d,o,x=[],m=!1;function y(C){return i.measureSize(l.measure(C))}function _(C){if(!a)return;o=y(e),x=s.map(y);function b(I){for(const N of I){if(m)return;const Z=N.target===e,Y=s.indexOf(N.target),T=Z?o:x[Y],E=y(Z?e:s[Y]);if(re(E-T)>=.5){C.reInit(),n.emit("resize");break}}}d=new ResizeObserver(I=>{(it(a)||a(C,I))&&b(I)}),r.requestAnimationFrame(()=>{h.forEach(I=>d.observe(I))})}function j(){m=!0,d&&d.disconnect()}return{init:_,destroy:j}}function pi(e,n,r,s,i,a){let l=0,h=0,d=i,o=a,x=e.get(),m=0;function y(){const T=s.get()-e.get(),E=!d;let c=0;return E?(l=0,r.set(s),e.set(s),c=T):(r.set(e),l+=T/d,l*=o,x+=l,e.add(l),c=x-m),h=_t(c),m=x,Y}function _(){const T=s.get()-n.get();return re(T)<.001}function j(){return d}function k(){return h}function C(){return l}function b(){return N(i)}function I(){return Z(a)}function N(T){return d=T,Y}function Z(T){return o=T,Y}const Y={direction:k,duration:j,velocity:C,seek:y,settled:_,useBaseFriction:I,useBaseDuration:b,useFriction:Z,useDuration:N};return Y}function mi(e,n,r,s,i){const a=i.measure(10),l=i.measure(50),h=Ae(.1,.99);let d=!1;function o(){return!(d||!e.reachedAny(r.get())||!e.reachedAny(n.get()))}function x(_){if(!o())return;const j=e.reachedMin(n.get())?"min":"max",k=re(e[j]-n.get()),C=r.get()-n.get(),b=h.constrain(k/l);r.subtract(C*b),!_&&re(C)<a&&(r.set(e.constrain(r.get())),s.useDuration(25).useBaseFriction())}function m(_){d=!_}return{shouldConstrain:o,constrain:x,toggleActive:m}}function gi(e,n,r,s,i){const a=Ae(-n+e,0),l=m(),h=x(),d=y();function o(j,k){return Ke(j,k)<=1}function x(){const j=l[0],k=ge(l),C=l.lastIndexOf(j),b=l.indexOf(k)+1;return Ae(C,b)}function m(){return r.map((j,k)=>{const{min:C,max:b}=a,I=a.constrain(j),N=!k,Z=kt(r,k);return N?b:Z||o(C,I)?C:o(b,I)?b:I}).map(j=>parseFloat(j.toFixed(3)))}function y(){if(n<=e+i)return[a.max];if(s==="keepSnaps")return l;const{min:j,max:k}=h;return l.slice(j,k)}return{snapsContained:d,scrollContainLimit:h}}function xi(e,n,r){const s=n[0],i=r?s-e:ge(n);return{limit:Ae(i,s)}}function vi(e,n,r,s){const a=n.min+.1,l=n.max+.1,{reachedMin:h,reachedMax:d}=Ae(a,l);function o(y){return y===1?d(r.get()):y===-1?h(r.get()):!1}function x(y){if(!o(y))return;const _=e*(y*-1);s.forEach(j=>j.add(_))}return{loop:x}}function yi(e){const{max:n,length:r}=e;function s(a){const l=a-n;return r?l/-r:0}return{get:s}}function bi(e,n,r,s,i){const{startEdge:a,endEdge:l}=e,{groupSlides:h}=i,d=m().map(n.measure),o=y(),x=_();function m(){return h(s).map(k=>ge(k)[l]-k[0][a]).map(re)}function y(){return s.map(k=>r[a]-k[a]).map(k=>-re(k))}function _(){return h(o).map(k=>k[0]).map((k,C)=>k+d[C])}return{snaps:o,snapsAligned:x}}function ji(e,n,r,s,i,a){const{groupSlides:l}=i,{min:h,max:d}=s,o=x();function x(){const y=l(a),_=!e||n==="keepSnaps";return r.length===1?[a]:_?y:y.slice(h,d).map((j,k,C)=>{const b=!k,I=kt(C,k);if(b){const N=ge(C[0])+1;return tn(N)}if(I){const N=Ze(a)-ge(C)[0]+1;return tn(N,ge(C)[0])}return j})}return{slideRegistry:o}}function wi(e,n,r,s,i){const{reachedAny:a,removeOffset:l,constrain:h}=s;function d(j){return j.concat().sort((k,C)=>re(k)-re(C))[0]}function o(j){const k=e?l(j):h(j),C=n.map((I,N)=>({diff:x(I-k,0),index:N})).sort((I,N)=>re(I.diff)-re(N.diff)),{index:b}=C[0];return{index:b,distance:k}}function x(j,k){const C=[j,j+r,j-r];if(!e)return j;if(!k)return d(C);const b=C.filter(I=>_t(I)===k);return b.length?d(b):ge(C)-r}function m(j,k){const C=n[j]-i.get(),b=x(C,k);return{index:j,distance:b}}function y(j,k){const C=i.get()+j,{index:b,distance:I}=o(C),N=!e&&a(C);if(!k||N)return{index:b,distance:j};const Z=n[b]-I,Y=j+x(Z,0);return{index:b,distance:Y}}return{byDistance:y,byIndex:m,shortcut:x}}function Si(e,n,r,s,i,a,l){function h(m){const y=m.distance,_=m.index!==n.get();a.add(y),y&&(s.duration()?e.start():(e.update(),e.render(1),e.update())),_&&(r.set(n.get()),n.set(m.index),l.emit("select"))}function d(m,y){const _=i.byDistance(m,y);h(_)}function o(m,y){const _=n.clone().set(m),j=i.byIndex(_.get(),y);h(j)}return{distance:d,index:o}}function _i(e,n,r,s,i,a,l,h){const d={passive:!0,capture:!0};let o=0;function x(_){if(!h)return;function j(k){if(new Date().getTime()-o>10)return;l.emit("slideFocusStart"),e.scrollLeft=0;const I=r.findIndex(N=>N.includes(k));St(I)&&(i.useDuration(0),s.index(I,0),l.emit("slideFocus"))}a.add(document,"keydown",m,!1),n.forEach((k,C)=>{a.add(k,"focus",b=>{(it(h)||h(_,b))&&j(C)},d)})}function m(_){_.code==="Tab"&&(o=new Date().getTime())}return{init:x}}function $e(e){let n=e;function r(){return n}function s(d){n=l(d)}function i(d){n+=l(d)}function a(d){n-=l(d)}function l(d){return St(d)?d:d.get()}return{get:r,set:s,add:i,subtract:a}}function On(e,n){const r=e.scroll==="x"?l:h,s=n.style;let i=null,a=!1;function l(y){return`translate3d(${y}px,0px,0px)`}function h(y){return`translate3d(0px,${y}px,0px)`}function d(y){if(a)return;const _=ii(e.direction(y));_!==i&&(s.transform=r(_),i=_)}function o(y){a=!y}function x(){a||(s.transform="",n.getAttribute("style")||n.removeAttribute("style"))}return{clear:x,to:d,toggleActive:o}}function ki(e,n,r,s,i,a,l,h,d){const x=Ge(i),m=Ge(i).reverse(),y=b().concat(I());function _(E,c){return E.reduce((u,f)=>u-i[f],c)}function j(E,c){return E.reduce((u,f)=>_(u,c)>0?u.concat([f]):u,[])}function k(E){return a.map((c,u)=>({start:c-s[u]+.5+E,end:c+n-.5+E}))}function C(E,c,u){const f=k(c);return E.map(v=>{const S=u?0:-r,M=u?r:0,U=u?"end":"start",te=f[v][U];return{index:v,loopPoint:te,slideLocation:$e(-1),translate:On(e,d[v]),target:()=>h.get()>te?S:M}})}function b(){const E=l[0],c=j(m,E);return C(c,r,!1)}function I(){const E=n-l[0]-1,c=j(x,E);return C(c,-r,!0)}function N(){return y.every(({index:E})=>{const c=x.filter(u=>u!==E);return _(c,n)<=.1})}function Z(){y.forEach(E=>{const{target:c,translate:u,slideLocation:f}=E,v=c();v!==f.get()&&(u.to(v),f.set(v))})}function Y(){y.forEach(E=>E.translate.clear())}return{canLoop:N,clear:Y,loop:Z,loopPoints:y}}function Ci(e,n,r){let s,i=!1;function a(d){if(!r)return;function o(x){for(const m of x)if(m.type==="childList"){d.reInit(),n.emit("slidesChanged");break}}s=new MutationObserver(x=>{i||(it(r)||r(d,x))&&o(x)}),s.observe(e,{childList:!0})}function l(){s&&s.disconnect(),i=!0}return{init:a,destroy:l}}function Ni(e,n,r,s){const i={};let a=null,l=null,h,d=!1;function o(){h=new IntersectionObserver(j=>{d||(j.forEach(k=>{const C=n.indexOf(k.target);i[C]=k}),a=null,l=null,r.emit("slidesInView"))},{root:e.parentElement,threshold:s}),n.forEach(j=>h.observe(j))}function x(){h&&h.disconnect(),d=!0}function m(j){return We(i).reduce((k,C)=>{const b=parseInt(C),{isIntersecting:I}=i[b];return(j&&I||!j&&!I)&&k.push(b),k},[])}function y(j=!0){if(j&&a)return a;if(!j&&l)return l;const k=m(j);return j&&(a=k),j||(l=k),k}return{init:o,destroy:x,get:y}}function Ei(e,n,r,s,i,a){const{measureSize:l,startEdge:h,endEdge:d}=e,o=r[0]&&i,x=j(),m=k(),y=r.map(l),_=C();function j(){if(!o)return 0;const I=r[0];return re(n[h]-I[h])}function k(){if(!o)return 0;const I=a.getComputedStyle(ge(s));return parseFloat(I.getPropertyValue(`margin-${d}`))}function C(){return r.map((I,N,Z)=>{const Y=!N,T=kt(Z,N);return Y?y[N]+x:T?y[N]+m:Z[N+1][h]-I[h]}).map(re)}return{slideSizes:y,slideSizesWithGaps:_,startGap:x,endGap:m}}function Ri(e,n,r,s,i,a,l,h,d){const{startEdge:o,endEdge:x,direction:m}=e,y=St(r);function _(b,I){return Ge(b).filter(N=>N%I===0).map(N=>b.slice(N,N+I))}function j(b){return b.length?Ge(b).reduce((I,N,Z)=>{const Y=ge(I)||0,T=Y===0,E=N===Ze(b),c=i[o]-a[Y][o],u=i[o]-a[N][x],f=!s&&T?m(l):0,v=!s&&E?m(h):0,S=re(u-v-(c+f));return Z&&S>n+d&&I.push(N),E&&I.push(b.length),I},[]).map((I,N,Z)=>{const Y=Math.max(Z[N-1]||0);return b.slice(Y,I)}):[]}function k(b){return y?_(b,r):j(b)}return{groupSlides:k}}function Pi(e,n,r,s,i,a,l){const{align:h,axis:d,direction:o,startIndex:x,loop:m,duration:y,dragFree:_,dragThreshold:j,inViewThreshold:k,slidesToScroll:C,skipSnaps:b,containScroll:I,watchResize:N,watchSlides:Z,watchDrag:Y,watchFocus:T}=a,E=2,c=di(),u=c.measure(n),f=r.map(c.measure),v=li(d,o),S=v.measureSize(u),M=fi(S),U=ai(h,S),te=!m&&!!I,K=m||!!I,{slideSizes:H,slideSizesWithGaps:X,startGap:L,endGap:ee}=Ei(v,u,f,r,K,i),F=Ri(v,S,C,m,u,f,L,ee,E),{snaps:p,snapsAligned:w}=bi(v,U,u,f,F),D=-ge(p)+ge(X),{snapsContained:P,scrollContainLimit:$}=gi(S,D,w,I,E),V=te?P:w,{limit:O}=xi(D,V,m),z=An(Ze(V),x,m),J=z.clone(),A=Ge(r),R=({dragHandler:je,scrollBody:xe,scrollBounds:fe,options:{loop:ve}})=>{ve||fe.constrain(je.pointerDown()),xe.seek()},G=({scrollBody:je,translate:xe,location:fe,offsetLocation:ve,previousLocation:Xe,scrollLooper:Dn,slideLooper:Ln,dragHandler:Fn,animation:zn,eventHandler:Nt,scrollBounds:Hn,options:{loop:Et}},Rt)=>{const Pt=je.settled(),$n=!Hn.shouldConstrain(),It=Et?Pt:Pt&&$n,At=It&&!Fn.pointerDown();At&&zn.stop();const Vn=fe.get()*Rt+Xe.get()*(1-Rt);ve.set(Vn),Et&&(Dn.loop(je.direction()),Ln.loop()),xe.to(ve.get()),At&&Nt.emit("settle"),It||Nt.emit("scroll")},B=oi(s,i,()=>R(Ne),je=>G(Ne,je)),Q=.68,W=V[z.get()],se=$e(W),q=$e(W),ne=$e(W),ue=$e(W),pe=pi(se,ne,q,ue,y,Q),de=wi(m,V,D,O,ue),be=Si(B,z,J,pe,de,ue,l),ae=yi(O),he=Qe(),ie=Ni(n,r,l,k),{slideRegistry:oe}=ji(te,I,V,$,F,A),me=_i(e,r,oe,be,pe,he,l,T),Ne={ownerDocument:s,ownerWindow:i,eventHandler:l,containerRect:u,slideRects:f,animation:B,axis:v,dragHandler:ci(v,e,s,i,ue,ui(v,i),se,B,be,pe,de,z,l,M,_,j,b,Q,Y),eventStore:he,percentOfView:M,index:z,indexPrevious:J,limit:O,location:se,offsetLocation:ne,previousLocation:q,options:a,resizeHandler:hi(n,l,i,r,v,N,c),scrollBody:pe,scrollBounds:mi(O,ne,ue,pe,M),scrollLooper:vi(D,O,ne,[se,ne,q,ue]),scrollProgress:ae,scrollSnapList:V.map(ae.get),scrollSnaps:V,scrollTarget:de,scrollTo:be,slideLooper:ki(v,S,D,H,X,p,V,ne,r),slideFocus:me,slidesHandler:Ci(n,l,Z),slidesInView:ie,slideIndexes:A,slideRegistry:oe,slidesToScroll:F,target:ue,translate:On(v,n)};return Ne}function Ii(){let e={},n;function r(o){n=o}function s(o){return e[o]||[]}function i(o){return s(o).forEach(x=>x(n,o)),d}function a(o,x){return e[o]=s(o).concat([x]),d}function l(o,x){return e[o]=s(o).filter(m=>m!==x),d}function h(){e={}}const d={init:r,emit:i,off:l,on:a,clear:h};return d}const Ai={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function Oi(e){function n(a,l){return In(a,l||{})}function r(a){const l=a.breakpoints||{},h=We(l).filter(d=>e.matchMedia(d).matches).map(d=>l[d]).reduce((d,o)=>n(d,o),{});return n(a,h)}function s(a){return a.map(l=>We(l.breakpoints||{})).reduce((l,h)=>l.concat(h),[]).map(e.matchMedia)}return{mergeOptions:n,optionsAtMedia:r,optionsMediaQueries:s}}function Ti(e){let n=[];function r(a,l){return n=l.filter(({options:h})=>e.optionsAtMedia(h).active!==!1),n.forEach(h=>h.init(a,e)),l.reduce((h,d)=>Object.assign(h,{[d.name]:d}),{})}function s(){n=n.filter(a=>a.destroy())}return{init:r,destroy:s}}function nt(e,n,r){const s=e.ownerDocument,i=s.defaultView,a=Oi(i),l=Ti(a),h=Qe(),d=Ii(),{mergeOptions:o,optionsAtMedia:x,optionsMediaQueries:m}=a,{on:y,off:_,emit:j}=d,k=v;let C=!1,b,I=o(Ai,nt.globalOptions),N=o(I),Z=[],Y,T,E;function c(){const{container:A,slides:R}=N;T=(vt(A)?e.querySelector(A):A)||e.children[0];const B=vt(R)?T.querySelectorAll(R):R;E=[].slice.call(B||T.children)}function u(A){const R=Pi(e,T,E,s,i,A,d);if(A.loop&&!R.slideLooper.canLoop()){const G=Object.assign({},A,{loop:!1});return u(G)}return R}function f(A,R){C||(I=o(I,A),N=x(I),Z=R||Z,c(),b=u(N),m([I,...Z.map(({options:G})=>G)]).forEach(G=>h.add(G,"change",v)),N.active&&(b.translate.to(b.location.get()),b.animation.init(),b.slidesInView.init(),b.slideFocus.init(J),b.eventHandler.init(J),b.resizeHandler.init(J),b.slidesHandler.init(J),b.options.loop&&b.slideLooper.loop(),T.offsetParent&&E.length&&b.dragHandler.init(J),Y=l.init(J,Z)))}function v(A,R){const G=F();S(),f(o({startIndex:G},A),R),d.emit("reInit")}function S(){b.dragHandler.destroy(),b.eventStore.clear(),b.translate.clear(),b.slideLooper.clear(),b.resizeHandler.destroy(),b.slidesHandler.destroy(),b.slidesInView.destroy(),b.animation.destroy(),l.destroy(),h.clear()}function M(){C||(C=!0,h.clear(),S(),d.emit("destroy"),d.clear())}function U(A,R,G){!N.active||C||(b.scrollBody.useBaseFriction().useDuration(R===!0?0:N.duration),b.scrollTo.index(A,G||0))}function te(A){const R=b.index.add(1).get();U(R,A,-1)}function K(A){const R=b.index.add(-1).get();U(R,A,1)}function H(){return b.index.add(1).get()!==F()}function X(){return b.index.add(-1).get()!==F()}function L(){return b.scrollSnapList}function ee(){return b.scrollProgress.get(b.offsetLocation.get())}function F(){return b.index.get()}function p(){return b.indexPrevious.get()}function w(){return b.slidesInView.get()}function D(){return b.slidesInView.get(!1)}function P(){return Y}function $(){return b}function V(){return e}function O(){return T}function z(){return E}const J={canScrollNext:H,canScrollPrev:X,containerNode:O,internalEngine:$,destroy:M,off:_,on:y,emit:j,plugins:P,previousScrollSnap:p,reInit:k,rootNode:V,scrollNext:te,scrollPrev:K,scrollProgress:ee,scrollSnapList:L,scrollTo:U,selectedScrollSnap:F,slideNodes:z,slidesInView:w,slidesNotInView:D};return f(n,r),setTimeout(()=>d.emit("init"),0),J}nt.globalOptions=void 0;function Ct(e={},n=[]){const r=g.useRef(e),s=g.useRef(n),[i,a]=g.useState(),[l,h]=g.useState(),d=g.useCallback(()=>{i&&i.reInit(r.current,s.current)},[i]);return g.useEffect(()=>{wt(r.current,e)||(r.current=e,d())},[e,d]),g.useEffect(()=>{ri(s.current,n)||(s.current=n,d())},[n,d]),g.useEffect(()=>{if(ni()&&l){nt.globalOptions=Ct.globalOptions;const o=nt(l,r.current,s.current);return a(o),()=>o.destroy()}else a(void 0)},[l,a]),[h,i]}Ct.globalOptions=void 0;const Tn=g.createContext(null);function Mn(){const e=g.useContext(Tn);if(!e)throw new Error("useCarousel must be used within a <Carousel />");return e}function Mi({orientation:e="horizontal",opts:n,setApi:r,plugins:s,className:i,children:a,...l}){const[h,d]=Ct({...n,axis:e==="horizontal"?"x":"y"},s),[o,x]=g.useState(!1),[m,y]=g.useState(!1),_=g.useCallback(b=>{b&&(x(b.canScrollPrev()),y(b.canScrollNext()))},[]),j=g.useCallback(()=>{d?.scrollPrev()},[d]),k=g.useCallback(()=>{d?.scrollNext()},[d]),C=g.useCallback(b=>{b.key==="ArrowLeft"?(b.preventDefault(),j()):b.key==="ArrowRight"&&(b.preventDefault(),k())},[j,k]);return g.useEffect(()=>{!d||!r||r(d)},[d,r]),g.useEffect(()=>{if(d)return _(d),d.on("reInit",_),d.on("select",_),()=>{d?.off("select",_)}},[d,_]),t.jsx(Tn.Provider,{value:{carouselRef:h,api:d,opts:n,orientation:e||(n?.axis==="y"?"vertical":"horizontal"),scrollPrev:j,scrollNext:k,canScrollPrev:o,canScrollNext:m},children:t.jsx("div",{onKeyDownCapture:C,className:ce("relative",i),role:"region","aria-roledescription":"carousel","data-slot":"carousel",...l,children:a})})}function Di({className:e,...n}){const{carouselRef:r,orientation:s}=Mn();return t.jsx("div",{ref:r,className:"overflow-hidden","data-slot":"carousel-content",children:t.jsx("div",{className:ce("flex",s==="horizontal"?"-ml-4":"-mt-4 flex-col",e),...n})})}function Li({className:e,...n}){const{orientation:r}=Mn();return t.jsx("div",{role:"group","aria-roledescription":"slide","data-slot":"carousel-item",className:ce("min-w-0 shrink-0 grow-0 basis-full",r==="horizontal"?"pl-4":"pt-4",e),...n})}function Fi({value:e,goal:n,unit:r,size:s=175,strokeWidth:i=6,showGoal:a,className:l}){const h=(s-i)/2,d=2*Math.PI*h,o=Math.min(n,Math.max(0,e)),x=d-o/n*d;return t.jsxs("div",{className:ce("inline-flex items-center justify-center",l),style:{width:s,height:s},children:[t.jsxs("svg",{className:"rotate-[-90deg]",width:s,height:s,children:[t.jsx("circle",{className:"text-slate-500/20 stroke-current",strokeWidth:i,fill:"transparent",r:h,cx:s/2,cy:s/2,style:{strokeDasharray:d}}),t.jsx("circle",{className:"text-primary stroke-current transition-[stroke-dashoffset] duration-300 ease-out",strokeWidth:i,fill:"transparent",r:h,cx:s/2,cy:s/2,style:{strokeDasharray:d,strokeDashoffset:x,strokeLinecap:"round"}})]}),t.jsx("div",{className:"absolute text-sm font-medium flex flex-col justify-center items-center",children:t.jsx("p",{className:"text-4xl font-bold text-slate-500 mb-1",children:e})})]})}const nn=[{id:"select",header:({table:e})=>t.jsx(Ut,{checked:e.getIsAllPageRowsSelected()||e.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:n=>e.toggleAllPageRowsSelected(!!n),"aria-label":"Select all"}),cell:({row:e})=>t.jsx(Ut,{checked:e.getIsSelected(),onCheckedChange:n=>{e.toggleSelected(!!n)},"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1},{accessorKey:"name",header:"Name",cell:({row:e})=>t.jsx(we,{to:`/dashboard/habits/${e.original.habit_id}`,className:"capitalize",children:e.original.habit_name})},{accessorKey:"longest_streak",header:"Longest Streak",cell:({row:e})=>t.jsx("div",{className:"capitalize",children:e.original.longest_streak})},{accessorKey:"current_streak",header:"Current Streak",cell:({row:e})=>t.jsx("div",{className:"capitalize",children:e.original.current_streak})},{accessorKey:"last_entry_date",header:"Last Updated",cell:({row:e})=>t.jsx("div",{className:"capitalize",children:e.original.last_entry_date})},{accessorKey:"today_value",header:"Today's Amount",cell:({row:e})=>t.jsx("div",{className:"capitalize",children:e.original.today_value?e.original.today_value:0})},{accessorKey:"join_count",header:"Users Joined",cell:({row:e})=>t.jsx("div",{className:"capitalize",children:e.original.join_count})},{accessorKey:"is_public",header:"Public",cell:({row:e})=>t.jsx("div",{className:"capitalize",children:e.original.is_public?t.jsx(Lr,{className:"size-4"}):t.jsx(zr,{className:"size-4"})})},{id:"actions",enableHiding:!1,cell:({row:e})=>(e.original,t.jsxs(Xn,{children:[t.jsx(er,{asChild:!0,children:t.jsxs(le,{variant:"ghost",className:"h-8 w-8 p-0",children:[t.jsx("span",{className:"sr-only",children:"Open menu"}),t.jsx(Rr,{})]})}),t.jsxs(tr,{align:"end",children:[t.jsx(nr,{children:"Actions"}),t.jsx(rr,{children:"Copy Entry ID"}),t.jsx(sr,{})]})]}))}],zi=({data:e})=>{const[n,r]=g.useState({}),s=br({data:e,columns:nn,getCoreRowModel:Er(),getPaginationRowModel:Nr(),getSortedRowModel:Cr(),getFilteredRowModel:kr(),onRowSelectionChange:r,state:{rowSelection:n}});return t.jsxs("div",{children:[t.jsx("div",{className:"overflow-hidden rounded-md border",children:t.jsxs(jr,{children:[t.jsx(wr,{children:s.getHeaderGroups().map(i=>t.jsx(ot,{children:i.headers.map(a=>t.jsx(Sr,{children:a.isPlaceholder?null:Bt(a.column.columnDef.header,a.getContext())},a.id))},i.id))}),t.jsx(_r,{children:s.getRowModel().rows?.length?s.getRowModel().rows.map(i=>t.jsx(ot,{"data-state":i.getIsSelected()&&"selected",children:i.getVisibleCells().map(a=>t.jsx(qt,{children:Bt(a.column.columnDef.cell,a.getContext())},a.id))},i.id)):t.jsx(ot,{children:t.jsx(qt,{colSpan:nn.length,className:"h-24 text-center",children:"No results."})})})]})}),t.jsxs("div",{className:"flex items-center justify-end space-x-2 py-4",children:[t.jsxs("div",{className:"text-muted-foreground flex-1 text-sm",children:[s.getFilteredSelectedRowModel().rows.length," of"," ",s.getFilteredRowModel().rows.length," row(s) selected."]}),t.jsxs("div",{className:"space-x-2",children:[t.jsx(le,{variant:"outline",size:"sm",onClick:()=>s.previousPage(),disabled:!s.getCanPreviousPage(),children:"Previous"}),t.jsx(le,{variant:"outline",size:"sm",onClick:()=>s.nextPage(),disabled:!s.getCanNextPage(),children:"Next"})]})]})]})};var et={exports:{}};var Hi=et.exports,rn;function $i(){return rn||(rn=1,(function(e,n){((r,s)=>{e.exports=s()})(Hi,function r(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},i,a=!s.document&&!!s.postMessage,l=s.IS_PAPA_WORKER||!1,h={},d=0,o={};function x(c){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(u){var f=Y(u);f.chunkSize=parseInt(f.chunkSize),u.step||u.chunk||(f.chunkSize=null),this._handle=new k(f),(this._handle.streamer=this)._config=f}).call(this,c),this.parseChunk=function(u,f){var v=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<v){let M=this._config.newline;M||(S=this._config.quoteChar||'"',M=this._handle.guessLineEndings(u,S)),u=[...u.split(M).slice(v)].join(M)}this.isFirstChunk&&E(this._config.beforeFirstChunk)&&(S=this._config.beforeFirstChunk(u))!==void 0&&(u=S),this.isFirstChunk=!1,this._halted=!1;var v=this._partialLine+u,S=(this._partialLine="",this._handle.parse(v,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(u=S.meta.cursor,v=(this._finished||(this._partialLine=v.substring(u-this._baseIndex),this._baseIndex=u),S&&S.data&&(this._rowCount+=S.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),l)s.postMessage({results:S,workerId:o.WORKER_ID,finished:v});else if(E(this._config.chunk)&&!f){if(this._config.chunk(S,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=S=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(S.data),this._completeResults.errors=this._completeResults.errors.concat(S.errors),this._completeResults.meta=S.meta),this._completed||!v||!E(this._config.complete)||S&&S.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),v||S&&S.meta.paused||this._nextChunk(),S}this._halted=!0},this._sendError=function(u){E(this._config.error)?this._config.error(u):l&&this._config.error&&s.postMessage({workerId:o.WORKER_ID,error:u,finished:!1})}}function m(c){var u;(c=c||{}).chunkSize||(c.chunkSize=o.RemoteChunkSize),x.call(this,c),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(f){this._input=f,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(u=new XMLHttpRequest,this._config.withCredentials&&(u.withCredentials=this._config.withCredentials),a||(u.onload=T(this._chunkLoaded,this),u.onerror=T(this._chunkError,this)),u.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var f,v=this._config.downloadRequestHeaders;for(f in v)u.setRequestHeader(f,v[f])}var S;this._config.chunkSize&&(S=this._start+this._config.chunkSize-1,u.setRequestHeader("Range","bytes="+this._start+"-"+S));try{u.send(this._config.downloadRequestBody)}catch(M){this._chunkError(M.message)}a&&u.status===0&&this._chunkError()}},this._chunkLoaded=function(){u.readyState===4&&(u.status<200||400<=u.status?this._chunkError():(this._start+=this._config.chunkSize||u.responseText.length,this._finished=!this._config.chunkSize||this._start>=(f=>(f=f.getResponseHeader("Content-Range"))!==null?parseInt(f.substring(f.lastIndexOf("/")+1)):-1)(u),this.parseChunk(u.responseText)))},this._chunkError=function(f){f=u.statusText||f,this._sendError(new Error(f))}}function y(c){(c=c||{}).chunkSize||(c.chunkSize=o.LocalChunkSize),x.call(this,c);var u,f,v=typeof FileReader<"u";this.stream=function(S){this._input=S,f=S.slice||S.webkitSlice||S.mozSlice,v?((u=new FileReader).onload=T(this._chunkLoaded,this),u.onerror=T(this._chunkError,this)):u=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var S=this._input,M=(this._config.chunkSize&&(M=Math.min(this._start+this._config.chunkSize,this._input.size),S=f.call(S,this._start,M)),u.readAsText(S,this._config.encoding));v||this._chunkLoaded({target:{result:M}})},this._chunkLoaded=function(S){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(S.target.result)},this._chunkError=function(){this._sendError(u.error)}}function _(c){var u;x.call(this,c=c||{}),this.stream=function(f){return u=f,this._nextChunk()},this._nextChunk=function(){var f,v;if(!this._finished)return f=this._config.chunkSize,u=f?(v=u.substring(0,f),u.substring(f)):(v=u,""),this._finished=!u,this.parseChunk(v)}}function j(c){x.call(this,c=c||{});var u=[],f=!0,v=!1;this.pause=function(){x.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){x.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(S){this._input=S,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){v&&u.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),u.length?this.parseChunk(u.shift()):f=!0},this._streamData=T(function(S){try{u.push(typeof S=="string"?S:S.toString(this._config.encoding)),f&&(f=!1,this._checkIsFinished(),this.parseChunk(u.shift()))}catch(M){this._streamError(M)}},this),this._streamError=T(function(S){this._streamCleanUp(),this._sendError(S)},this),this._streamEnd=T(function(){this._streamCleanUp(),v=!0,this._streamData("")},this),this._streamCleanUp=T(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function k(c){var u,f,v,S,M=Math.pow(2,53),U=-M,te=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,K=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,H=this,X=0,L=0,ee=!1,F=!1,p=[],w={data:[],errors:[],meta:{}};function D(O){return c.skipEmptyLines==="greedy"?O.join("").trim()==="":O.length===1&&O[0].length===0}function P(){if(w&&v&&(V("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),v=!1),c.skipEmptyLines&&(w.data=w.data.filter(function(A){return!D(A)})),$()){let A=function(R,G){E(c.transformHeader)&&(R=c.transformHeader(R,G)),p.push(R)};if(w)if(Array.isArray(w.data[0])){for(var O=0;$()&&O<w.data.length;O++)w.data[O].forEach(A);w.data.splice(0,1)}else w.data.forEach(A)}function z(A,R){for(var G=c.header?{}:[],B=0;B<A.length;B++){var Q=B,W=A[B],W=((se,q)=>(ne=>(c.dynamicTypingFunction&&c.dynamicTyping[ne]===void 0&&(c.dynamicTyping[ne]=c.dynamicTypingFunction(ne)),(c.dynamicTyping[ne]||c.dynamicTyping)===!0))(se)?q==="true"||q==="TRUE"||q!=="false"&&q!=="FALSE"&&((ne=>{if(te.test(ne)&&(ne=parseFloat(ne),U<ne&&ne<M))return 1})(q)?parseFloat(q):K.test(q)?new Date(q):q===""?null:q):q)(Q=c.header?B>=p.length?"__parsed_extra":p[B]:Q,W=c.transform?c.transform(W,Q):W);Q==="__parsed_extra"?(G[Q]=G[Q]||[],G[Q].push(W)):G[Q]=W}return c.header&&(B>p.length?V("FieldMismatch","TooManyFields","Too many fields: expected "+p.length+" fields but parsed "+B,L+R):B<p.length&&V("FieldMismatch","TooFewFields","Too few fields: expected "+p.length+" fields but parsed "+B,L+R)),G}var J;w&&(c.header||c.dynamicTyping||c.transform)&&(J=1,!w.data.length||Array.isArray(w.data[0])?(w.data=w.data.map(z),J=w.data.length):w.data=z(w.data,0),c.header&&w.meta&&(w.meta.fields=p),L+=J)}function $(){return c.header&&p.length===0}function V(O,z,J,A){O={type:O,code:z,message:J},A!==void 0&&(O.row=A),w.errors.push(O)}E(c.step)&&(S=c.step,c.step=function(O){w=O,$()?P():(P(),w.data.length!==0&&(X+=O.data.length,c.preview&&X>c.preview?f.abort():(w.data=w.data[0],S(w,H))))}),this.parse=function(O,z,J){var A=c.quoteChar||'"',A=(c.newline||(c.newline=this.guessLineEndings(O,A)),v=!1,c.delimiter?E(c.delimiter)&&(c.delimiter=c.delimiter(O),w.meta.delimiter=c.delimiter):((A=((R,G,B,Q,W)=>{var se,q,ne,ue;W=W||[",","	","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var pe=0;pe<W.length;pe++){for(var de,be=W[pe],ae=0,he=0,ie=0,oe=(ne=void 0,new b({comments:Q,delimiter:be,newline:G,preview:10}).parse(R)),me=0;me<oe.data.length;me++)B&&D(oe.data[me])?ie++:(de=oe.data[me].length,he+=de,ne===void 0?ne=de:0<de&&(ae+=Math.abs(de-ne),ne=de));0<oe.data.length&&(he/=oe.data.length-ie),(q===void 0||ae<=q)&&(ue===void 0||ue<he)&&1.99<he&&(q=ae,se=be,ue=he)}return{successful:!!(c.delimiter=se),bestDelimiter:se}})(O,c.newline,c.skipEmptyLines,c.comments,c.delimitersToGuess)).successful?c.delimiter=A.bestDelimiter:(v=!0,c.delimiter=o.DefaultDelimiter),w.meta.delimiter=c.delimiter),Y(c));return c.preview&&c.header&&A.preview++,u=O,f=new b(A),w=f.parse(u,z,J),P(),ee?{meta:{paused:!0}}:w||{meta:{paused:!1}}},this.paused=function(){return ee},this.pause=function(){ee=!0,f.abort(),u=E(c.chunk)?"":u.substring(f.getCharIndex())},this.resume=function(){H.streamer._halted?(ee=!1,H.streamer.parseChunk(u,!0)):setTimeout(H.resume,3)},this.aborted=function(){return F},this.abort=function(){F=!0,f.abort(),w.meta.aborted=!0,E(c.complete)&&c.complete(w),u=""},this.guessLineEndings=function(R,A){R=R.substring(0,1048576);var A=new RegExp(C(A)+"([^]*?)"+C(A),"gm"),J=(R=R.replace(A,"")).split("\r"),A=R.split(`
`),R=1<A.length&&A[0].length<J[0].length;if(J.length===1||R)return`
`;for(var G=0,B=0;B<J.length;B++)J[B][0]===`
`&&G++;return G>=J.length/2?`\r
`:"\r"}}function C(c){return c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function b(c){var u=(c=c||{}).delimiter,f=c.newline,v=c.comments,S=c.step,M=c.preview,U=c.fastMode,te=null,K=!1,H=c.quoteChar==null?'"':c.quoteChar,X=H;if(c.escapeChar!==void 0&&(X=c.escapeChar),(typeof u!="string"||-1<o.BAD_DELIMITERS.indexOf(u))&&(u=","),v===u)throw new Error("Comment character same as delimiter");v===!0?v="#":(typeof v!="string"||-1<o.BAD_DELIMITERS.indexOf(v))&&(v=!1),f!==`
`&&f!=="\r"&&f!==`\r
`&&(f=`
`);var L=0,ee=!1;this.parse=function(F,p,w){if(typeof F!="string")throw new Error("Input must be a string");var D=F.length,P=u.length,$=f.length,V=v.length,O=E(S),z=[],J=[],A=[],R=L=0;if(!F)return ae();if(U||U!==!1&&F.indexOf(H)===-1){for(var G=F.split(f),B=0;B<G.length;B++){if(A=G[B],L+=A.length,B!==G.length-1)L+=f.length;else if(w)return ae();if(!v||A.substring(0,V)!==v){if(O){if(z=[],ue(A.split(u)),he(),ee)return ae()}else ue(A.split(u));if(M&&M<=B)return z=z.slice(0,M),ae(!0)}}return ae()}for(var Q=F.indexOf(u,L),W=F.indexOf(f,L),se=new RegExp(C(X)+C(H),"g"),q=F.indexOf(H,L);;)if(F[L]===H)for(q=L,L++;;){if((q=F.indexOf(H,q+1))===-1)return w||J.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:z.length,index:L}),de();if(q===D-1)return de(F.substring(L,q).replace(se,H));if(H===X&&F[q+1]===X)q++;else if(H===X||q===0||F[q-1]!==X){Q!==-1&&Q<q+1&&(Q=F.indexOf(u,q+1));var ne=pe((W=W!==-1&&W<q+1?F.indexOf(f,q+1):W)===-1?Q:Math.min(Q,W));if(F.substr(q+1+ne,P)===u){A.push(F.substring(L,q).replace(se,H)),F[L=q+1+ne+P]!==H&&(q=F.indexOf(H,L)),Q=F.indexOf(u,L),W=F.indexOf(f,L);break}if(ne=pe(W),F.substring(q+1+ne,q+1+ne+$)===f){if(A.push(F.substring(L,q).replace(se,H)),be(q+1+ne+$),Q=F.indexOf(u,L),q=F.indexOf(H,L),O&&(he(),ee))return ae();if(M&&z.length>=M)return ae(!0);break}J.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:z.length,index:L}),q++}}else if(v&&A.length===0&&F.substring(L,L+V)===v){if(W===-1)return ae();L=W+$,W=F.indexOf(f,L),Q=F.indexOf(u,L)}else if(Q!==-1&&(Q<W||W===-1))A.push(F.substring(L,Q)),L=Q+P,Q=F.indexOf(u,L);else{if(W===-1)break;if(A.push(F.substring(L,W)),be(W+$),O&&(he(),ee))return ae();if(M&&z.length>=M)return ae(!0)}return de();function ue(ie){z.push(ie),R=L}function pe(ie){var oe=0;return oe=ie!==-1&&(ie=F.substring(q+1,ie))&&ie.trim()===""?ie.length:oe}function de(ie){return w||(ie===void 0&&(ie=F.substring(L)),A.push(ie),L=D,ue(A),O&&he()),ae()}function be(ie){L=ie,ue(A),A=[],W=F.indexOf(f,L)}function ae(ie){if(c.header&&!p&&z.length&&!K){var oe=z[0],me=Object.create(null),Ne=new Set(oe);let je=!1;for(let xe=0;xe<oe.length;xe++){let fe=oe[xe];if(me[fe=E(c.transformHeader)?c.transformHeader(fe,xe):fe]){let ve,Xe=me[fe];for(;ve=fe+"_"+Xe,Xe++,Ne.has(ve););Ne.add(ve),oe[xe]=ve,me[fe]++,je=!0,(te=te===null?{}:te)[ve]=fe}else me[fe]=1,oe[xe]=fe;Ne.add(fe)}je&&console.warn("Duplicate headers found and renamed."),K=!0}return{data:z,errors:J,meta:{delimiter:u,linebreak:f,aborted:ee,truncated:!!ie,cursor:R+(p||0),renamedHeaders:te}}}function he(){S(ae()),z=[],J=[]}},this.abort=function(){ee=!0},this.getCharIndex=function(){return L}}function I(c){var u=c.data,f=h[u.workerId],v=!1;if(u.error)f.userError(u.error,u.file);else if(u.results&&u.results.data){var S={abort:function(){v=!0,N(u.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Z,resume:Z};if(E(f.userStep)){for(var M=0;M<u.results.data.length&&(f.userStep({data:u.results.data[M],errors:u.results.errors,meta:u.results.meta},S),!v);M++);delete u.results}else E(f.userChunk)&&(f.userChunk(u.results,S,u.file),delete u.results)}u.finished&&!v&&N(u.workerId,u.results)}function N(c,u){var f=h[c];E(f.userComplete)&&f.userComplete(u),f.terminate(),delete h[c]}function Z(){throw new Error("Not implemented.")}function Y(c){if(typeof c!="object"||c===null)return c;var u,f=Array.isArray(c)?[]:{};for(u in c)f[u]=Y(c[u]);return f}function T(c,u){return function(){c.apply(u,arguments)}}function E(c){return typeof c=="function"}return o.parse=function(c,u){var f=(u=u||{}).dynamicTyping||!1;if(E(f)&&(u.dynamicTypingFunction=f,f={}),u.dynamicTyping=f,u.transform=!!E(u.transform)&&u.transform,!u.worker||!o.WORKERS_SUPPORTED)return f=null,o.NODE_STREAM_INPUT,typeof c=="string"?(c=(v=>v.charCodeAt(0)!==65279?v:v.slice(1))(c),f=new(u.download?m:_)(u)):c.readable===!0&&E(c.read)&&E(c.on)?f=new j(u):(s.File&&c instanceof File||c instanceof Object)&&(f=new y(u)),f.stream(c);(f=(()=>{var v;return!!o.WORKERS_SUPPORTED&&(v=(()=>{var S=s.URL||s.webkitURL||null,M=r.toString();return o.BLOB_URL||(o.BLOB_URL=S.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",M,")();"],{type:"text/javascript"})))})(),(v=new s.Worker(v)).onmessage=I,v.id=d++,h[v.id]=v)})()).userStep=u.step,f.userChunk=u.chunk,f.userComplete=u.complete,f.userError=u.error,u.step=E(u.step),u.chunk=E(u.chunk),u.complete=E(u.complete),u.error=E(u.error),delete u.worker,f.postMessage({input:c,config:u,workerId:f.id})},o.unparse=function(c,u){var f=!1,v=!0,S=",",M=`\r
`,U='"',te=U+U,K=!1,H=null,X=!1,L=((()=>{if(typeof u=="object"){if(typeof u.delimiter!="string"||o.BAD_DELIMITERS.filter(function(p){return u.delimiter.indexOf(p)!==-1}).length||(S=u.delimiter),typeof u.quotes!="boolean"&&typeof u.quotes!="function"&&!Array.isArray(u.quotes)||(f=u.quotes),typeof u.skipEmptyLines!="boolean"&&typeof u.skipEmptyLines!="string"||(K=u.skipEmptyLines),typeof u.newline=="string"&&(M=u.newline),typeof u.quoteChar=="string"&&(U=u.quoteChar),typeof u.header=="boolean"&&(v=u.header),Array.isArray(u.columns)){if(u.columns.length===0)throw new Error("Option columns is empty");H=u.columns}u.escapeChar!==void 0&&(te=u.escapeChar+U),u.escapeFormulae instanceof RegExp?X=u.escapeFormulae:typeof u.escapeFormulae=="boolean"&&u.escapeFormulae&&(X=/^[=+\-@\t\r].*$/)}})(),new RegExp(C(U),"g"));if(typeof c=="string"&&(c=JSON.parse(c)),Array.isArray(c)){if(!c.length||Array.isArray(c[0]))return ee(null,c,K);if(typeof c[0]=="object")return ee(H||Object.keys(c[0]),c,K)}else if(typeof c=="object")return typeof c.data=="string"&&(c.data=JSON.parse(c.data)),Array.isArray(c.data)&&(c.fields||(c.fields=c.meta&&c.meta.fields||H),c.fields||(c.fields=Array.isArray(c.data[0])?c.fields:typeof c.data[0]=="object"?Object.keys(c.data[0]):[]),Array.isArray(c.data[0])||typeof c.data[0]=="object"||(c.data=[c.data])),ee(c.fields||[],c.data||[],K);throw new Error("Unable to serialize unrecognized input");function ee(p,w,D){var P="",$=(typeof p=="string"&&(p=JSON.parse(p)),typeof w=="string"&&(w=JSON.parse(w)),Array.isArray(p)&&0<p.length),V=!Array.isArray(w[0]);if($&&v){for(var O=0;O<p.length;O++)0<O&&(P+=S),P+=F(p[O],O);0<w.length&&(P+=M)}for(var z=0;z<w.length;z++){var J=($?p:w[z]).length,A=!1,R=$?Object.keys(w[z]).length===0:w[z].length===0;if(D&&!$&&(A=D==="greedy"?w[z].join("").trim()==="":w[z].length===1&&w[z][0].length===0),D==="greedy"&&$){for(var G=[],B=0;B<J;B++){var Q=V?p[B]:B;G.push(w[z][Q])}A=G.join("").trim()===""}if(!A){for(var W=0;W<J;W++){0<W&&!R&&(P+=S);var se=$&&V?p[W]:W;P+=F(w[z][se],W)}z<w.length-1&&(!D||0<J&&!R)&&(P+=M)}}return P}function F(p,w){var D,P;return p==null?"":p.constructor===Date?JSON.stringify(p).slice(1,25):(P=!1,X&&typeof p=="string"&&X.test(p)&&(p="'"+p,P=!0),D=p.toString().replace(L,te),(P=P||f===!0||typeof f=="function"&&f(p,w)||Array.isArray(f)&&f[w]||(($,V)=>{for(var O=0;O<V.length;O++)if(-1<$.indexOf(V[O]))return!0;return!1})(D,o.BAD_DELIMITERS)||-1<D.indexOf(S)||D.charAt(0)===" "||D.charAt(D.length-1)===" ")?U+D+U:D)}},o.RECORD_SEP="",o.UNIT_SEP="",o.BYTE_ORDER_MARK="\uFEFF",o.BAD_DELIMITERS=["\r",`
`,'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!a&&!!s.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=10485760,o.RemoteChunkSize=5242880,o.DefaultDelimiter=",",o.Parser=b,o.ParserHandle=k,o.NetworkStreamer=m,o.FileStreamer=y,o.StringStreamer=_,o.ReadableStreamStreamer=j,s.jQuery&&((i=s.jQuery).fn.parse=function(c){var u=c.config||{},f=[];return this.each(function(M){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var U=0;U<this.files.length;U++)f.push({file:this.files[U],inputElem:this,instanceConfig:i.extend({},u)})}),v(),this;function v(){if(f.length===0)E(c.complete)&&c.complete();else{var M,U,te,K,H=f[0];if(E(c.before)){var X=c.before(H.file,H.inputElem);if(typeof X=="object"){if(X.action==="abort")return M="AbortError",U=H.file,te=H.inputElem,K=X.reason,void(E(c.error)&&c.error({name:M},U,te,K));if(X.action==="skip")return void S();typeof X.config=="object"&&(H.instanceConfig=i.extend(H.instanceConfig,X.config))}else if(X==="skip")return void S()}var L=H.instanceConfig.complete;H.instanceConfig.complete=function(ee){E(L)&&L(ee,H.file,H.inputElem),S()},o.parse(H.file,H.instanceConfig)}}function S(){f.splice(0,1),v()}}),l&&(s.onmessage=function(c){c=c.data,o.WORKER_ID===void 0&&c&&(o.WORKER_ID=c.workerId),typeof c.input=="string"?s.postMessage({workerId:o.WORKER_ID,results:o.parse(c.input,c.config),finished:!0}):(s.File&&c.input instanceof File||c.input instanceof Object)&&(c=o.parse(c.input,c.config))&&s.postMessage({workerId:o.WORKER_ID,results:c,finished:!0})}),(m.prototype=Object.create(x.prototype)).constructor=m,(y.prototype=Object.create(x.prototype)).constructor=y,(_.prototype=Object.create(_.prototype)).constructor=_,(j.prototype=Object.create(x.prototype)).constructor=j,o})})(et)),et.exports}var Vi=$i();const Bi=qn(Vi),qi=({habits:e})=>{const{user:n}=cn(),[r,s]=g.useState(null),[i,a]=g.useState(""),l=async d=>{if(!n)return;const o=d.map(y=>{const _=Number(y.value);return isNaN(_)||_<=0?(console.warn(`Skipping invalid value: ${y.value}`),null):{date:y.date,habit_name:r?r.name:i,value:_,notes:"CSV Import"}}).filter(y=>y!==null),{data:x,error:m}=await Ue.rpc("import_habit_entries",{p_user_id:n.id,p_entries:o});console.log(x,m)},h=async d=>{const o=d.target.files?.[0];o&&Bi.parse(o,{header:!0,complete:async x=>{const m=x.data;await l(m)}})};return t.jsxs(Tt,{children:[t.jsx(Mt,{children:"Import"}),t.jsx(Dt,{className:" w-xl max-w-full",children:t.jsxs(Lt,{children:[t.jsx(Ft,{children:"Import your CSV."}),t.jsx(ht,{}),t.jsxs("div",{className:"space-y-8 mt-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(Be,{children:"Habit Name"}),t.jsxs("div",{className:"flex w-full items-center gap-2",children:[r||i!==""?t.jsx(Tr,{className:"text-green-500"}):t.jsx(Ar,{}),t.jsxs("div",{className:"relative w-full",children:[t.jsx(tt,{placeholder:"Habit name",value:r?r.name:i,onChange:d=>{s(null),a(d.target.value)},className:""}),t.jsxs(Tt,{children:[t.jsx(Mt,{children:t.jsx("div",{className:"absolute right-1 size-7 top-1/2 -translate-y-1/2 bg-slate-900 rounded-md text-white items-center flex justify-center",children:t.jsx(Br,{className:"size-5"})})}),t.jsx(Dt,{className:"",children:t.jsxs(Lt,{children:[t.jsx(Ft,{children:"Select a habit to reference your import."}),t.jsx(ht,{}),t.jsx(yr,{asChild:!0,children:t.jsx("div",{className:"space-y-4",children:e&&e.map((d,o)=>t.jsx(Ee,{className:"p-2",onClick:()=>s(d),children:t.jsxs(pt,{className:"",children:[t.jsx(Re,{children:d.name}),t.jsx(mt,{className:"text-xs",children:d.id}),t.jsx(Gn,{className:"h-full flex justify-center items-center",children:r&&r.id===d.id?t.jsx(Gr,{className:"text-green-500"}):t.jsx(Qr,{className:"text-slate-700"})})]})},d.id))})})]})})]})]})]})]}),t.jsxs("div",{className:"grid w-full max-w-sm items-center gap-3",children:[t.jsx(Be,{htmlFor:"csv",children:"CSV File"}),t.jsx(tt,{id:"csv",type:"file",accept:".csv",disabled:!r&&i==="",onChange:h,className:"file-input"})]})]})]})})]})},Ve=new Ir().toISOString().split("T")[0];async function ha(){const{data:{user:e}}=await Ue.auth.getUser();if(!e)return;const n=await De(e.id),{data:r}=await Ue.rpc("get_habit_dashboard_stats",{p_user_id:e.id}),s=n.map(l=>Ue.rpc("get_daily_habit_sum",{p_user_id:e.id,p_habit_id:l.id,p_date:Ve})),i=await Promise.all(s),a=n.map((l,h)=>({id:l.id,value:i[h].data??0}));return{user:e,habits:n??[],stats:r??[],dailySums:a}}const pa=Bn(function({loaderData:n}){const r=n.user,[s,i]=g.useState(!1),[a,l]=g.useState(""),[h,d]=g.useState(0),[o,x]=g.useState(n.habits??[]),[m,y]=g.useState(n.dailySums??[]),[_,j]=g.useState(null),[k,C]=g.useState(0),b=g.useRef(null),I=g.useMemo(()=>o.filter(f=>f.status==="active"&&!f.is_archived),[o]),N=g.useMemo(()=>{const f=m.filter(ee=>ee.value>0).length,v=I.length,S=v>0?Math.round(f/v*100):0,M=v-f,U=n.stats??[],te=U.length>0?Math.max(...U.map(ee=>ee.current_streak??0)):0,K=m.reduce((ee,F)=>ee+F.value,0),H=U.filter(ee=>(m.find(p=>p.id===ee.habit_id)?.value??0)===0&&(ee.current_streak??0)>0).length,X=v-f,L=U.length>0?Math.round(U.reduce((ee,F)=>ee+(F.week_completion??0),0)/U.length):0;return{completed:f,total:v,remaining:M,completionRate:S,currentStreak:te,totalEntries:K,atRisk:H,notStarted:X,weekCompletion:L}},[m,I,n.stats]),Z=async f=>{if(f.preventDefault(),!!r)try{await at({user_id:r.id,habit_id:a,value:h,entry_date:Ve}),i(!1),l(""),d(0),Oe.success("Successfully updated habit.");const v=await De(r.id);x(v),await T(v)}catch(v){console.error("Failed to add habit entry",v),Oe.error("Failed to update habit. Please try again.")}},Y=async f=>{if(!r)return 0;const{data:v,error:S}=await Ue.rpc("get_daily_habit_sum",{p_user_id:r.id,p_habit_id:f,p_date:Ve});return S?(console.error("RPC call failed:",S),0):v??0},T=async f=>{if(!f)return;const v=await Promise.all(f.map(M=>Y(M.id))),S=f.map((M,U)=>({id:M.id,value:v[U]}));y(S)},E=async()=>{if(!r)return;const f=await De(r.id);x(f),await T(f)},c=async(f,v)=>{if(r)try{await at({user_id:r.id,habit_id:f,value:v,entry_date:Ve}),Oe.success("Updated habit entry.");const S=await De(r.id);x(S),await T(S)}catch(S){console.error("Failed to update habit entry",S),Oe.error("Failed to update habit. Please try again.")}},u=async f=>{if(!(!r||k<0))try{await at({user_id:r.id,habit_id:f,value:k,entry_date:Ve}),Oe.success("Successfully updated habit."),j(null),C(0);const v=await De(r.id);x(v),await T(v)}catch(v){console.error("Failed to update habit entry",v),Oe.error("Failed to update habit. Please try again.")}};return g.useEffect(()=>{E()},[r,s]),t.jsxs("div",{className:"relative h-full flex flex-1 flex-col gap-6 p-4 pt-0",children:[t.jsxs("div",{className:"md:min-h-min",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx("h4",{className:"text-sm leading-none font-medium",children:"Dashboard"}),t.jsx("p",{className:"text-muted-foreground text-sm",children:"Track your habits and log your daily progress."})]}),t.jsx(ht,{className:"my-4"})]}),t.jsxs("div",{className:"grid gap-2 md:grid-cols-2 lg:grid-cols-3",children:[t.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"h-full",children:t.jsx(we,{to:"/dashboard",children:t.jsxs(Ee,{className:"group cursor-pointer hover:border-primary/50 transition-all duration-200 hover:shadow-lg h-full flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between px-3 pt-2 pb-1",children:[t.jsx(Re,{className:"text-[10px] font-medium text-muted-foreground uppercase tracking-wide",children:"Today's Status"}),t.jsx(Kt,{className:"h-3.5 w-3.5 text-primary"})]}),t.jsxs("div",{className:"px-3 pb-2.5 flex-1 flex flex-col justify-between",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-baseline gap-2",children:[t.jsx("span",{className:"text-2xl font-bold text-primary",children:N.completed}),t.jsx("span",{className:"text-sm text-muted-foreground",children:"/"}),t.jsx("span",{className:"text-xl font-semibold",children:N.total})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[t.jsx("div",{className:"flex-1 h-1.5 bg-secondary rounded-full overflow-hidden",children:t.jsx(_e.div,{initial:{width:0},animate:{width:`${N.completionRate}%`},transition:{duration:.8,delay:.2},className:`h-full rounded-full ${N.completionRate>=75?"bg-primary":N.completionRate>=50?"bg-accent":"bg-muted-foreground"}`})}),t.jsxs("span",{className:"text-xs font-semibold min-w-10 text-right",children:[N.completionRate,"%"]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 pt-2 border-t border-border/50",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-[10px] text-muted-foreground block",children:"Remaining"}),t.jsx("span",{className:"text-xs font-semibold",children:N.remaining})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:"text-[10px] text-muted-foreground block",children:"This week"}),t.jsxs("span",{className:"text-xs font-semibold",children:[N.weekCompletion,"%"]})]})]})]})]})})}),t.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"h-full",children:t.jsx(we,{to:"/dashboard/habits",children:t.jsxs(Ee,{className:"group cursor-pointer hover:border-primary/50 transition-all duration-200 hover:shadow-lg h-full flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between px-3 pt-2 pb-1",children:[t.jsx(Re,{className:"text-[10px] font-medium text-muted-foreground uppercase tracking-wide",children:"Habits Overview"}),t.jsx(Gt,{className:"h-3.5 w-3.5 text-accent"})]}),t.jsxs("div",{className:"px-3 pb-2.5 flex-1 flex flex-col justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold",children:N.total}),t.jsx("p",{className:"text-[10px] text-muted-foreground mt-0.5",children:N.total===1?"Active habit":"Active habits"})]}),t.jsxs("div",{className:"space-y-1.5 mt-2 pt-2 border-t border-border/50",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"}),t.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Completed"})]}),t.jsx("span",{className:"text-xs font-semibold",children:N.completed})]}),N.atRisk>0&&t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("div",{className:"h-2 w-2 rounded-full bg-chart-4"}),t.jsx("span",{className:"text-[10px] text-muted-foreground",children:"At risk"})]}),t.jsx("span",{className:"text-xs font-semibold text-chart-4",children:N.atRisk})]}),N.notStarted>0&&t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("div",{className:"h-2 w-2 rounded-full bg-muted-foreground"}),t.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Not started"})]}),t.jsx("span",{className:"text-xs font-semibold",children:N.notStarted})]})]})]})]})})}),t.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},className:"h-full",children:t.jsx(we,{to:"/dashboard/analytics",children:t.jsxs(Ee,{className:"group cursor-pointer hover:border-primary/50 transition-all duration-200 hover:shadow-lg h-full flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between px-3 pt-2 pb-1",children:[t.jsx(Re,{className:"text-[10px] font-medium text-muted-foreground uppercase tracking-wide",children:"Streak & Momentum"}),t.jsx(lt,{className:"h-3.5 w-3.5 text-chart-4"})]}),t.jsxs("div",{className:"px-3 pb-2.5 flex-1 flex flex-col justify-between",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("span",{className:"text-2xl font-bold",children:N.currentStreak}),N.currentStreak>0&&t.jsx(lt,{className:"h-4 w-4 text-chart-4 animate-pulse"})]}),t.jsx("p",{className:"text-[10px] text-muted-foreground mt-0.5",children:N.currentStreak===0?"Start your streak today!":N.currentStreak===1?"day streak - keep going!":"days streak - keep going!"})]}),t.jsx("div",{className:"mt-2 pt-2 border-t border-border/50",children:N.atRisk>0?t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Streaks at risk"}),t.jsx("span",{className:"text-xs font-semibold text-chart-4",children:N.atRisk})]}):N.currentStreak>0?t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Kt,{className:"h-3 w-3 text-primary"}),t.jsx("span",{className:"text-[10px] text-muted-foreground",children:"All streaks safe"})]}):t.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Log entries to build streaks"})})]})]})})})]}),t.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},children:t.jsx(Ee,{className:"group hover:border-primary/50 transition-all duration-200 hover:shadow-lg",children:t.jsxs("div",{className:"flex flex-row items-center justify-between px-4 py-2.5",children:[t.jsx(Re,{className:"text-sm font-medium text-muted-foreground",children:"Quick Actions"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(le,{size:"sm",onClick:()=>i(!s),className:"h-8 px-3 flex items-center gap-1.5",children:[t.jsx(Wt,{className:"h-3.5 w-3.5"}),t.jsx("span",{className:"text-xs",children:"Log Entry"})]}),t.jsx(we,{to:"/dashboard/habits",children:t.jsxs(le,{size:"sm",variant:"outline",className:"h-8 px-3 flex items-center gap-1.5",children:[t.jsx(Gt,{className:"h-3.5 w-3.5"}),t.jsx("span",{className:"text-xs",children:"View All"})]})}),t.jsx(we,{to:"/dashboard/analytics",children:t.jsxs(le,{size:"sm",variant:"outline",className:"h-8 px-3 flex items-center gap-1.5",children:[t.jsx(ct,{className:"h-3.5 w-3.5"}),t.jsx("span",{className:"text-xs",children:"Analytics"})]})})]})]})})}),s&&t.jsx(_e.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:t.jsxs(Ee,{children:[t.jsxs(pt,{children:[t.jsx(Re,{children:"Log Habit Entry"}),t.jsx(mt,{children:"Select your habit and enter the value you completed today."})]}),t.jsx(Ot,{children:t.jsx("form",{ref:b,onSubmit:Z,children:t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsxs("div",{className:"grid gap-2",children:[t.jsx(Be,{htmlFor:"habit",children:"Select Habit"}),t.jsx("div",{className:"relative w-full",children:t.jsx(Ks,{onSelect:l})})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(Be,{htmlFor:"value",children:"How many units did you complete today?"}),t.jsx(tt,{id:"value",type:"number",min:0,value:h||"",onChange:f=>d(Number(f.target.value)||0),required:!0,placeholder:"Enter value"})]})]})})}),t.jsxs(Wn,{className:"flex gap-2",children:[t.jsx(Pr,{buttonText:"Save Entry",type:"submit",onContinue:()=>b.current?.requestSubmit(),dialingDesc:"This will add an entry for today."}),t.jsx(le,{variant:"outline",onClick:()=>{i(!1),l(""),d(0)},children:"Cancel"})]})]})}),I.length>0?t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Today's Habits"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(qi,{habits:o}),t.jsx(we,{to:"/dashboard/analytics",children:t.jsxs(le,{variant:"outline",size:"sm",children:["View Analytics",t.jsx(ct,{className:"ml-2 h-4 w-4"})]})})]})]}),t.jsx(Mi,{opts:{align:"start"},className:"w-full",children:t.jsx(Di,{className:"p-3",children:I.map(f=>{const S=m.find(K=>K.id===f.id)?.value??0,M=f.goal?Math.min(S/f.goal*100,100):0,te=n.stats?.find(K=>K.habit_id===f.id)?.current_streak??0;return t.jsx(Li,{className:"basis-full lg:basis-1/3",children:t.jsx(_e.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},children:t.jsxs(Ee,{className:`w-full transition-all hover:shadow-lg ${M>=100?"border-primary border-2":M>=50?"border-accent":"border-border"}`,children:[t.jsx(pt,{className:"pb-3",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx(Re,{className:"text-lg capitalize mb-1",children:f.name}),t.jsx(mt,{className:"text-xs",children:f.description||`Goal: ${f.goal} ${f.unit} ${f.frequency}`})]}),t.jsx(we,{to:`/dashboard/habits/${f.id}`,onClick:K=>K.stopPropagation(),children:t.jsx(le,{variant:"ghost",size:"icon",className:"h-8 w-8",children:t.jsx(ct,{className:"h-4 w-4"})})})]})}),t.jsxs(Ot,{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"shrink-0",children:t.jsx(Fi,{value:S,goal:f.goal??1,unit:f.unit,showGoal:!1,size:80})}),t.jsxs("div",{className:"flex-1 space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-muted-foreground",children:"Progress"}),t.jsxs("span",{className:"text-sm font-semibold",children:[Math.round(M),"%"]})]}),t.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:t.jsx(_e.div,{initial:{width:0},animate:{width:`${M}%`},transition:{duration:.5},className:`h-2 rounded-full ${M>=100?"bg-primary":M>=50?"bg-accent":"bg-muted-foreground"}`})}),te>0&&t.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[t.jsx(lt,{className:"h-3 w-3 text-chart-4"}),t.jsxs("span",{children:[te," day",te!==1?"s":""," streak"]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[t.jsx(zt,{children:t.jsxs(Ht,{children:[t.jsx($t,{asChild:!0,children:t.jsx(le,{variant:"outline",size:"icon",className:"h-9 w-9",onClick:K=>{K.stopPropagation(),c(f.id,-1)},children:t.jsx($r,{className:"h-4 w-4"})})}),t.jsx(Vt,{children:t.jsx("p",{children:"Decrease by 1"})})]})}),t.jsxs("div",{className:"flex-1 flex items-center justify-center gap-1",children:[t.jsx("span",{className:"text-lg font-semibold",children:S}),t.jsxs("span",{className:"text-sm text-muted-foreground",children:["/ ",f.goal]}),t.jsx("span",{className:"text-xs text-muted-foreground ml-1",children:f.unit})]}),t.jsx(zt,{children:t.jsxs(Ht,{children:[t.jsx($t,{asChild:!0,children:t.jsx(le,{variant:"outline",size:"icon",className:"h-9 w-9",onClick:K=>{K.stopPropagation(),c(f.id,1)},children:t.jsx(Wt,{className:"h-4 w-4"})})}),t.jsx(Vt,{children:t.jsx("p",{children:"Increase by 1"})})]})}),t.jsxs(En,{open:_===f.id,onOpenChange:K=>{K?(j(f.id),C(S)):(j(null),C(0))},children:[t.jsx(Rn,{asChild:!0,children:t.jsx(le,{variant:"outline",size:"icon",className:"h-9 w-9",onClick:K=>K.stopPropagation(),children:t.jsx(xr,{className:"h-4 w-4"})})}),t.jsx(Pn,{className:"w-64",onClick:K=>K.stopPropagation(),children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs(Be,{htmlFor:`edit-${f.id}`,className:"text-sm font-medium",children:["Update ",f.name]}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Enter the total value for today"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(tt,{id:`edit-${f.id}`,type:"number",min:0,value:k||"",onChange:K=>C(Number(K.target.value)||0),placeholder:"Enter value",className:"flex-1",onKeyDown:K=>{K.key==="Enter"&&u(f.id)}}),t.jsx("span",{className:"text-sm text-muted-foreground",children:f.unit})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(le,{size:"sm",className:"flex-1",onClick:()=>u(f.id),children:"Update"}),t.jsx(le,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>{j(null),C(0)},children:"Cancel"})]})]})]})})]})]})]})]})})},f.id)})})})]}):t.jsx(ei,{}),n.stats&&n.stats.length>0&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"All Habits Overview"}),t.jsx(zi,{data:n.stats})]})]})});export{ha as clientLoader,pa as default};
