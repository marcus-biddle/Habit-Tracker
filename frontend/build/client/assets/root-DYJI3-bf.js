import{w as k,M as w,L as S,S as b,a as T,O as E}from"./index-C4tjowxs.js";import{r as a,j as e}from"./catchall-DwulxZne.js";/* empty css              */import{c as y,T as L,L as _,u as A,s as z,A as C}from"./AuthContext-CVIf5Sz9.js";import"./utils-CDN07tui.js";const N=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],M=y("circle-check",N);const P=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],I=y("info",P);const R=[["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],$=y("octagon-x",R);const D=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],H=y("triangle-alert",D);var O=(t,c,m,d,r,s,h,l)=>{let i=document.documentElement,u=["light","dark"];function n(o){(Array.isArray(t)?t:[t]).forEach(p=>{let f=p==="class",j=f&&s?r.map(x=>s[x]||x):r;f?(i.classList.remove(...j),i.classList.add(s&&s[o]?s[o]:o)):i.setAttribute(p,o)}),v(o)}function v(o){l&&u.includes(o)&&(i.style.colorScheme=o)}function g(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(d)n(d);else try{let o=localStorage.getItem(c)||m,p=h&&o==="system"?g():o;n(p)}catch{}},U=a.createContext(void 0),q={setTheme:t=>{},themes:[]},B=()=>{var t;return(t=a.useContext(U))!=null?t:q};a.memo(({forcedTheme:t,storageKey:c,attribute:m,enableSystem:d,enableColorScheme:r,defaultTheme:s,value:h,themes:l,nonce:i,scriptProps:u})=>{let n=JSON.stringify([m,c,s,t,l,h,d,r]).slice(1,-1);return a.createElement("script",{...u,suppressHydrationWarning:!0,nonce:typeof window>"u"?i:"",dangerouslySetInnerHTML:{__html:`(${O.toString()})(${n})`}})});const F=({...t})=>{const{theme:c="system"}=B();return e.jsx(L,{theme:c,className:"toaster group",icons:{success:e.jsx(M,{className:"size-4"}),info:e.jsx(I,{className:"size-4"}),warning:e.jsx(H,{className:"size-4"}),error:e.jsx($,{className:"size-4"}),loading:e.jsx(_,{className:"size-4 animate-spin"})},style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)","--border-radius":"var(--radius)"},...t})},J=a.createContext(void 0),K=({children:t})=>{const{user:c}=A(),[m,d]=a.useState({}),r=a.useRef(null),s=a.useRef(null),h=120*1e3;return a.useEffect(()=>{if(!c)return;r.current=z.channel("habit-presence",{config:{presence:{key:c.id}}}),r.current.on("presence",{event:"sync"},()=>{d(r.current.presenceState()),console.log("sync,",r.current.presenceState())}),r.current.subscribe(async n=>{n==="SUBSCRIBED"&&l("online")});const l=n=>{r.current&&r.current.track({user_id:c.id,status:n,last_active:Date.now()})},i=()=>{l("idle")},u=()=>{s.current&&clearTimeout(s.current),l("online"),s.current=setTimeout(i,h)};return["mousemove","keydown","touchstart"].forEach(n=>window.addEventListener(n,u)),u(),()=>{r.current&&r.current.unsubscribe(),s.current&&clearTimeout(s.current),["mousemove","keydown","touchstart"].forEach(n=>window.removeEventListener(n,u))}},[c]),e.jsx(J.Provider,{value:{presenceState:m},children:t})};function Q({children:t}){return e.jsxs("html",{lang:"en",children:[e.jsxs("head",{children:[e.jsx("meta",{charSet:"UTF-8"}),e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),e.jsx("title",{children:"Habit Tracker"}),e.jsx(w,{}),e.jsx(S,{})]}),e.jsxs("body",{children:[t,e.jsx(b,{}),e.jsx(T,{}),e.jsx(F,{})]})]})}const Z=k(function(){return e.jsx(C,{children:e.jsx(K,{children:e.jsx(E,{})})})});export{Q as Layout,Z as default};
